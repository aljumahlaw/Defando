<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# ุชุนูููุงุช ุงูุชุนุฏูู ุงูููุงุฆูุฉ ูููููุฐุฌ

๐ฏ ุงููููุฉ
ูู ุจุชุนุฏูู ูุซููุฉ "๐ ูุซููุฉ ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงููุงููููุฉ - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู ุงููุญุณูู" ููู ุงูุชุนูููุงุช ุงูุชุงููุฉ ุจุฏูุฉ ุชุงูุฉ. ูู ุชุนุฏูู ููุฑููู ููุฌุจ ุชูููุฐู ุญุฑููุงู ููุง ูู ููุถุญ.

๐ ุงูุชุนุฏููุงุช ุงูุฅูุฒุงููุฉ (7 ุชุนุฏููุงุช)
โ๏ธ ุงูุชุนุฏูู 1: ุชูุญูุฏ ุนุฏุฏ ุงููุฑุงุญู
ุงููููุน: ูุณู "๐ฏ ูุธุฑุฉ ุนุงูุฉ ุดุงููุฉ"
ุงุจุญุซ ุนู ุงููุต ุงูุชุงูู:
ูุฐู ูุซููุฉ ุชุทููุฑ **ููุณููุฉ ุนูู 8 ูุฑุงุญู** ูุจูุงุก ูุธุงู

ุงุณุชุจุฏูู ุจู:
ูุฐู ูุซููุฉ ุชุทููุฑ **ููุณููุฉ ุนูู 9 ูุฑุงุญู (ูุฑููุฉ ูู 0 ุฅูู 8)** ูุจูุงุก ูุธุงู

ุซู ุงุจุญุซ ุนู:

## ๐ ุงููุฑุงุญู ุงูุซูุงููุฉ (ูุฑุชุจุฉ ุญุณุจ ุงูุฃููููุฉ)

ุงุณุชุจุฏูู ุจู:

## ๐ ุงููุฑุงุญู ุงูุชุณุนุฉ (ูุฑููุฉ ูู 0 ุฅูู 8ุ ูุฑุชุจุฉ ุญุณุจ ุงูุฃููููุฉ)

โ๏ธ ุงูุชุนุฏูู 2: ุชูุถูุญ ุงููุฏุฉ ุงูุฒูููุฉ
ุงููููุน: ุจุนุฏ ูุงุฆูุฉ ุงููุฑุงุญู ูุจุงุดุฑุฉ
ุงุจุญุซ ุนู ุงููุต ุงูุชุงูู:
**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ**: 20-26 ููู ุนูู (ุญูุงูู ุดูุฑ)

ุงุณุชุจุฏูู ุจู:
**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ**: 23-31 ููู ุนูู

**ุงูุชูุตูู:**

- ุงููุฑุงุญู 0-7 (ุงูุชูููุฐ ุงูุฃุณุงุณู): 20-26 ููู ุนูู
- ุงููุฑุญูุฉ 8 (ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ูุงูุชูุซูู): 3-5 ุฃูุงู ุนูู ุฅุถุงููุฉ

โ๏ธ ุงูุชุนุฏูู 3: ุญุณู ุงุฎุชูุงุฑ ุงูุชูููุงุช
ุงููููุน: ุงููุฑุญูุฉ 0 - ูุณู "2. ุงุฎุชูุงุฑ ุชูููุงุช ุงูุชุทููุฑ"
ุงุจุญุซ ุนู ุงููุต ุงูุชุงูู:
ุงูุญุฒูุฉ ุงูุชูููุฉ ุงูููุตู ุจูุง:
โโ Backend: ASP.NET Core 8 (C\#) ุฃู Laravel 11 (PHP)
โโ Frontend: Blazor Server ุฃู Vue.js 3
โโ ูุงุนุฏุฉ ุงูุจูุงูุงุช: PostgreSQL 14+
โโ ูุนุงูุฌุฉ PDF: iText7 ุฃู PDFTron
โโ OCR: Tesseract OCR
โโ ุงูุจุญุซ: Elasticsearch ุฃู PostgreSQL Full-Text Search
โโ ุงูุจุฑูุฏ: MailKit (SMTP)

ุงุณุชุจุฏูู ุจุงููุงูู ุจู:
ุงูุญุฒูุฉ ุงูุชูููุฉ ุงููุนุชูุฏุฉ (ูุฑุงุฑ ููุงุฆู):

**โ๏ธ ุงููุฑุงุฑ ุงูุฅูุฒุงูู: ูุฌุจ ุญุณู ูุฐู ุงูุงุฎุชูุงุฑุงุช ูู ุงูููู ุงูุฃูู ูู ุงููุฑุญูุฉ 0**

โโ **Backend**: ASP.NET Core 8 (C\#)
โ   โโ ุงูุชุซุจูุช: dotnet --version (ููุชุญูู)
โ
โโ **Frontend**: Blazor Server
โ   โโ ูุฏูุฌ ูุน ASP.NET Core
โ
โโ **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: PostgreSQL 14+
โ   โโ ุงูุชุซุจูุช: sudo apt install postgresql-14
โ
โโ **ูุนุงูุฌุฉ PDF**: iText7
โ   โโ ุงูุชุซุจูุช: Install-Package itext7
โ
โโ **OCR**: Tesseract OCR 5.x
โ   โโ ุงูุชุซุจูุช Windows: choco install tesseract
โ   โโ ุงูุชุซุจูุช Linux: sudo apt install tesseract-ocr tesseract-ocr-ara
โ
โโ **ุงูุจุญุซ**: PostgreSQL Full-Text Search (ูุฏูุฌ)
โ   โโ ูุง ูุญุชุงุฌ ุชุซุจูุช ุฅุถุงูู
โ
โโ **ุงูุจุฑูุฏ**: MailKit
โ   โโ ุงูุชุซุจูุช: Install-Package MailKit
โ
โโ **ุงูููุงู ุงูุฎูููุฉ**: Hangfire
โโ ุงูุชุซุจูุช: Install-Package Hangfire.AspNetCore

**๐ ููุงุญุธุฉ ุญุงุณูุฉ**: ูุฐู ุงููุฑุงุฑุงุช ููุงุฆูุฉ ููุง ุฑุฌูุน ุนููุง. ุฃู ุฐูุฑ ูุจุฏุงุฆู (Laravelุ Vue.jsุ PDFTronุ Elasticsearch) ูู ุจููุฉ ุงููุซููุฉ ููุนุชุจุฑ ููุบูุงู.

โ๏ธ ุงูุชุนุฏูู 4: ุชูุถูุญ ุขููุฉ Lock Timeout
ุงููููุน: ุงููุฑุญูุฉ 3 - ูู ููุงูุฉ ูุณู "2. ูุธุงู Check-in/Check-out"
ุฃุถู ุงููุณู ุงูุชุงูู (ูุง ุชุญุฐู ุดูุฆุงูุ ููุท ุฃุถู):

### **ุขููุฉ Lock Timeout ุงูุชููุงุฆู (8 ุณุงุนุงุช)**

**ุงููุจุฏุฃ**: ุฃู ููู ููููู ูุฃูุซุฑ ูู 8 ุณุงุนุงุช ูููู ูููู ุชููุงุฆูุงู ูููุน ุญุฌุฒ ุงููููุงุช ุฅูู ุงูุฃุจุฏ.

**ุงูุชูููุฐ ุจุงุณุชุฎุฏุงู Hangfire Background Service:**

**ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ููุฏ ูู Program.cs**

```csharp
// ูู Program.cs ุจุนุฏ services.AddControllers()
services.AddHangfire(config => config.UsePostgreSqlStorage(connectionString));
services.AddHangfireServer();

// ุชุณุฌูู ุงููููุฉ ุงููุชูุฑุฑุฉ
RecurringJob.AddOrUpdate(
    "unlock-timeout-files",
    () => UnlockTimedOutDocuments(),
    Cron.Minutely(30) // ูู 30 ุฏูููุฉ
);

ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุฏุงูุฉ ูู ุงูููู
public static async Task UnlockTimedOutDocuments()
{
    using var connection = new NpgsqlConnection(connectionString);
    var sql = @"
        UPDATE Documents 
        SET is_locked = false, 
            locked_by = NULL, 
            locked_at = NULL
        WHERE is_locked = true 
          AND locked_at < NOW() - INTERVAL '8 hours'
        RETURNING document_id, document_name;
    ";
    
    var unlockedDocs = await connection.QueryAsync(sql);
    
    // ุชุณุฌูู ูู AuditLog
    foreach (var doc in unlockedDocs)
    {
        await connection.ExecuteAsync(@"
            INSERT INTO AuditLog (user_id, action, entity_type, entity_id, details)
            VALUES (NULL, 'auto_unlock', 'document', @id, 'Timeout after 8 hours')
        ", new { id = doc.document_id });
    }
}

ููุทุฉ ุชุญูู ุฅุถุงููุฉ:
โ Hangfire Dashboard ูุนูู ุนูู /hangfire ููุธูุฑ ุงููููุฉ "unlock-timeout-files"
โ ุงุฎุชุจุงุฑ: ููู ููู ูุฏููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (locked_at ูุจู 9 ุณุงุนุงุช) ูุงูุชุญูู ูู ูู ุงูููู ุงูุชููุงุฆู
โ AuditLog ูุณุฌู ุฅุฌุฑุงุก "auto_unlock" ุนูุฏ ุญุฏูุซู


---

### โ๏ธ ุงูุชุนุฏูู 5: ุญุณู ุขููุฉ ุงูุฅุดุนุงุฑุงุช

**ุงููููุน**: ุงููุฑุญูุฉ 1 - ุจุนุฏ ูุณู "3. ุจูุงุก ุตูุญุฉ Dashboard ุงูุฑุฆูุณูุฉ"

**ุฃุถู ุงููุณู ุงูุชุงูู (ูุง ุชุญุฐู ุดูุฆุงูุ ููุท ุฃุถู):**

```markdown
### 5. ุชุญุฏูุฏ ุขููุฉ ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ

**โ๏ธ ุงููุฑุงุฑ ุงูุฅูุฒุงูู: ุงุฎุชุฑ ุงูุฎูุงุฑ 1 (ุงูููุตู ุจู) ุฃู ุงูุฎูุงุฑ 2 ูู ููุงูุฉ ุงููุฑุญูุฉ 0**

---

#### **ุงูุฎูุงุฑ 1: Polling ุงูุจุณูุท** โ (ููุตู ุจู ููุจุฏุงูุฉ)

**ุงููุตู**: JavaScript ูู ุตูุญุฉ Dashboard ูุณุชุนูู ุนู ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู 30 ุซุงููุฉ.

**ุงููุฒุงูุง**:
- ุจุณูุท ุฌุฏุงู
- ูุง ูุญุชุงุฌ ุฅุนุฏุงุฏุงุช ุฎุงุตุฉ
- ูุนูู ูุน ุฃู ูุชุตูุญ

**ุงูุนููุจ**:
- ุชุฃุฎูุฑ ูุตู ุฅูู 30 ุซุงููุฉ
- ุญูู ุฅุถุงูู ุจุณูุท ุนูู ุงูุฎุงุฏู (ุงุณุชุนูุงู ูู 30 ุซุงููุฉ ร ุนุฏุฏ ุงููุณุชุฎุฏููู)

**ุงูููุฏ (ุฃุถู ูู Dashboard.razor):**
```javascript
<script>
// ุงุณุชุนูุงู ุฏูุฑู ุนู ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ
setInterval(async () => {
    try {
        const response = await fetch('/api/notifications/unread-count');
        const count = await response.json();
        const badge = document.getElementById('notification-badge');
        if (badge) {
            badge.textContent = count;
            badge.style.display = count > 0 ? 'inline' : 'none';
        }
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุฌูุจ ุงูุฅุดุนุงุฑุงุช:', error);
    }
}, 30000); // ูู 30 ุซุงููุฉ
</script>

API Endpoint ุงููุทููุจ:
[HttpGet("api/notifications/unread-count")]
public async Task<IActionResult> GetUnreadCount()
{
    var userId = GetCurrentUserId();
    var count = await _db.Notifications
        .Where(n => n.user_id == userId && !n.is_read)
        .CountAsync();
    return Ok(count);
}


ุงูุฎูุงุฑ 2: SignalR ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ (ุงุฎุชูุงุฑู - ุชุนููุฏ ุฃุนูู)
ุงููุตู: ุงุชุตุงู WebSocket ุฏุงุฆู ุจูู ุงููุชุตูุญ ูุงูุฎุงุฏู ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ููุฑุงู (< 1 ุซุงููุฉ).
ุงููุฒุงูุง:
ุฅุดุนุงุฑุงุช ููุฑูุฉ ุญููููุฉ
ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ
ุงูุนููุจ:
ุชุนููุฏ ุฃุนูู ูู ุงูุฅุนุฏุงุฏ
ุงุณุชููุงู ุฐุงูุฑุฉ ุฃูุจุฑ (ุงุชุตุงู ููุชูุญ ููู ูุณุชุฎุฏู)
ุฅุฐุง ุงุฎุชุฑุช ูุฐุง ุงูุฎูุงุฑ:
ุงูุชุซุจูุช:
Install-Package Microsoft.AspNetCore.SignalR.Client

ุฅูุดุงุก Hub:
// Hubs/NotificationHub.cs
public class NotificationHub : Hub
{
    public async Task SendNotificationToUser(int userId, string message)
    {
        await Clients.User(userId.ToString()).SendAsync("ReceiveNotification", message);
    }
}

ุชุณุฌูู ูู Program.cs:
builder.Services.AddSignalR();
app.MapHub<NotificationHub>("/notificationHub");


๐ ููุทุฉ ุชุญูู ุฅุถุงููุฉ:
โ ุชู ุงุฎุชูุงุฑ ุงูุฎูุงุฑ (1 ุฃู 2) ูุชูุซููู ูู ููู DECISIONS.md
โ ุงูุขููุฉ ุงููุฎุชุงุฑุฉ ุชุนูู ุจูุฌุงุญ (ุงุฎุชุจุงุฑ ุจุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู)
โ ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช ูู Dashboard ูุชุญุฏุซ ุนูุฏ ุฅุถุงูุฉ ุฅุดุนุงุฑ ุฌุฏูุฏ


---

### โ๏ธ ุงูุชุนุฏูู 6: ุฅุถุงูุฉ ุฃุฏูุงุช ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

**ุงููููุน**: ุงููุฑุญูุฉ 8 - ูุณู "2. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก"

**ุงุจุญุซ ุนู ุงููุต ุงูุชุงูู:**

2. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
ุงูุงุฎุชุจุงุฑุงุช:
ุฑูุน 50 ููู ุฏูุนุฉ ูุงุญุฏุฉ (< 5 ุซูุงูู)
ุงูุจุญุซ ูู 1000 ูุณุชูุฏ (< 2 ุซุงููุฉ)
ูุชุญ Dashboard (< 1 ุซุงููุฉ)
OCR ูููู 10 ุตูุญุงุช (< 30 ุซุงููุฉ)

**ุงุณุชุจุฏูู ุจุงููุงูู ุจู:**
```markdown
### 2. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

**ุงูุฃุฏูุงุช ุงููุทููุจุฉ:**

| ุงูุฃุฏุงุฉ | ุงูุงุณุชุฎุฏุงู | ุงูุชุซุจูุช |
|--------|----------|---------|
| **Apache JMeter** | ุงุฎุชุจุงุฑ ุญูู HTTP ุดุงูู (ููุตู ุจู) | [ุชุญููู JMeter](https://jmeter.apache.org/download_jmeter.cgi) |
| **k6** | ุณูุฑูุจุชุงุช ุจุณูุทุฉ ุจูุบุฉ JavaScript | `choco install k6` (Windows) ุฃู `brew install k6` (Mac) |

---

#### **ูุซุงู ุนููู: ุงุฎุชุจุงุฑ ุฑูุน ุงููููุงุช ุจุงุณุชุฎุฏุงู k6**

**ุงูููู: test-upload.js**
```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  vus: 10,        // 10 ูุณุชุฎุฏููู ูุชุฒุงูููู
  duration: '30s', // ูุฏุฉ ุงูุงุฎุชุจุงุฑ
};

export default function () {
  // ุฅูุดุงุก ููู PDF ูููู
  const file = open('test-sample.pdf', 'b');
  
  const formData = {
    file: http.file(file, 'test-sample.pdf', 'application/pdf'),
    folder_id: '1',
    document_type: 'ุนูุฏ',
  };
  
  const response = http.post('http://localhost:5000/api/documents/upload', formData);
  
  check(response, {
    'ุงูุญุงูุฉ 200': (r) => r.status === 200,
    'ููุช ุงูุฑูุน < 5 ุซูุงูู': (r) => r.timings.duration < 5000,
  });
  
  sleep(1);
}

ุชุดุบูู ุงูุงุฎุชุจุงุฑ:
k6 run test-upload.js

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
checks.........................: 100.00% โ 300  โ 0
http_req_duration..............: avg=2.1s  min=1.8s  max=4.5s


ูุนุงููุฑ ุงููุฌุงุญ ุงููุทููุจุฉ:
ุงูุงุฎุชุจุงุฑุงููุนูุงุฑุงูุฃุฏุงุฉ
ุฑูุน 50 ููู ุฏูุนุฉ ูุงุญุฏุฉ
< 5 ุซูุงูู (ูุชูุณุท 100ms/ููู)
k6
ุงูุจุญุซ ูู 1000 ูุณุชูุฏ
< 2 ุซุงููุฉ
JMeter
ูุชุญ ุตูุญุฉ Dashboard
< 1 ุซุงููุฉ
JMeter
OCR ูููู 10 ุตูุญุงุช
< 30 ุซุงููุฉ
ูุฏูู + Stopwatch

ููุงุท ุชุญูู ุฅุถุงููุฉ:
โ ุชู ุชุซุจูุช k6 ุฃู JMeter ุจูุฌุงุญ
โ ุชู ูุชุงุจุฉ 3 ุณูุฑูุจุชุงุช ุงุฎุชุจุงุฑ ุนูู ุงูุฃูู (ุฑูุนุ ุจุญุซุ Dashboard)
โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงุฌุชุงุฒุช ุงููุนุงููุฑ ุงููุญุฏุฏุฉ
โ ุชู ุชูุซูู ุงููุชุงุฆุฌ ูู ููู PERFORMANCE_TEST_RESULTS.md ูุน ููุทุงุช ุดุงุดุฉ
โ ุชู ุชุญุฏูุฏ ุฃู ุงุฎุชูุงูุงุช (bottlenecks) ูุญููุง


---

### โ๏ธ ุงูุชุนุฏูู 7: ุฅุถุงูุฉ ูุณู ุงุณุชุฑุงุชูุฌูุฉ ุชุฎุฒูู ุงููููุงุช

**ุงููููุน**: ุงููุฑุญูุฉ 2 - ุจุนุฏ ูุณู "2. ุจูุงุก ูุธุงู ุฑูุน ุงููููุงุช" ููุจู ูุณู "3. ูุนุงููุฉ ุงููุณุชูุฏุงุช"

**ุฃุถู ุงููุณู ุงูุชุงูู ุจุงููุงูู:**

```markdown
### 2.5 ุงุณุชุฑุงุชูุฌูุฉ ุชุฎุฒูู ุงููููุงุช ุงููุนููุฉ (File Storage Strategy)

**โ๏ธ ูุฑุงุฑ ูุนูุงุฑู ุญุงุณู**

**ุงููุดููุฉ**: ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ุจุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ ูุญุชูู ุนูู 1000 ูููุ ูู ููุนูุฏ ุชุณููุฉ ุงููุฌูุฏ ุงููุนูู ุนูู NAS ูููุญุฏูุซ 1000 ูุณุงุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุฐุง ุฎุทูุฑ ูุจุทูุก!

**ุงูุญู ุงููุนุชูุฏ: GUID-Based Storage**

**ุงููุจุฏุฃ**:
- ุงููููุงุช ุชูุฎุฒู ุนูู NAS ุจุฃุณูุงุก ูุฑูุฏุฉ (GUID) ุจุฏูู ุฃู ูููู ูุฌูุฏุงุช
- ูููู ุงููุฌูุฏุงุช ุงูุฐู ูุฑุงู ุงููุณุชุฎุฏู ูู **ูุฌุฑุฏ ุชูุซูู ููุทูู (Logical View)** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ = ุชุญุฏูุซ ุณุทุฑ ูุงุญุฏ ูู ุฌุฏูู Folders (ุจุฏูู ููุณ ุงููููุงุช ุงููุนููุฉ)

**ูุซุงู:**

| ูุง ูุฑุงู ุงููุณุชุฎุฏู | ุงููุณุงุฑ ุงููุนูู ุนูู NAS |
|------------------|----------------------|
| `/ูุถุงูุง-2025/ุนูุงุฑูุฉ/ุนูุฏ-ุจูุน.pdf` | `/storage/3f2a8b4c-1d5e-4a9b-8f3c-9e1b2d4a7c5f.pdf` |
| `/ูุถุงูุง-2025/ุชุฌุงุฑูุฉ/ูุฐูุฑุฉ.docx` | `/storage/7a1b9e3d-4f2c-8a5b-1e9d-6c3f8b2a4d7e.docx` |

**ุงูุชูููุฐ:**

**ุชุนุฏูู ุฌุฏูู Documents:**
```sql
ALTER TABLE Documents 
ADD COLUMN file_guid UUID DEFAULT gen_random_uuid();

-- ุงููุณุงุฑ ุงููุนูู ููุจูู ูู GUID ููุท
-- file_path = '/mnt/nas/storage/' + file_guid + '.pdf'

ููุฏ ุงูุฑูุน (Pseudo-code):
public async Task<IActionResult> UploadFile(IFormFile file, int folderId)
{
    // ุชูููุฏ GUID ูุฑูุฏ
    var fileGuid = Guid.NewGuid();
    var extension = Path.GetExtension(file.FileName);
    var physicalPath = $"/mnt/nas/storage/{fileGuid}{extension}";
    
    // ุญูุธ ุงูููู ุจุงููุณุงุฑ ุงููุนูู
    using (var stream = new FileStream(physicalPath, FileMode.Create))
    {
        await file.CopyToAsync(stream);
    }
    
    // ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    var document = new Document
    {
        document_name = file.FileName,  // ุงูุงุณู ุงูุฃุตูู ููุนุฑุถ
        file_guid = fileGuid,            // ูููุตูู ุงููุนูู
        file_path = physicalPath,        // ุงููุณุงุฑ ุงููุงูู
        folder_id = folderId             // ุงูุฑุจุท ุงูููุทูู ููุท
    };
    
    await _db.Documents.AddAsync(document);
    await _db.SaveChangesAsync();
    
    return Ok();
}

ุงูููุงุฆุฏ: โ ุฅุนุงุฏุฉ ุชุณููุฉ ุงููุฌูุฏุงุช ููุฑูุฉ (ุชุญุฏูุซ ูุตู ููุท) โ ููู ุงููููุงุช ุจูู ุงููุฌูุฏุงุช ููุฑู (ุชุญุฏูุซ folder_id ููุท) โ ูุง ุฎุทุฑ ูู ุชุตุงุฏู ุงูุฃุณูุงุก (GUID ูุฑูุฏ) โ ุณูููุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู (ูุฌูุฏ ูุงุญุฏ ูุณุทุญ)
ููุทุฉ ุชุญูู ุฅุถุงููุฉ:
โ ุชู ุฅุถุงูุฉ ุนููุฏ file_guid ูู ุฌุฏูู Documents
โ ููุฏ ุงูุฑูุน ูุณุชุฎุฏู GUID ููุชุฎุฒูู ุงููุนูู
โ ุงุฎุชุจุงุฑ: ุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ ูุญุชูู ุนูู 100 ููู ุชุชู ุฎูุงู < 100ms
โ ุงุฎุชุจุงุฑ: ููู ููู ุจูู ูุฌูุฏูู ูุชู ุฎูุงู < 50ms


---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุญูุธ ุงููุซููุฉ ุงููุนุฏููุฉุ ุชุฃูุฏ ูู:


โ ุชู ุชูููุฐ ุงูุชุนุฏูู 1 (ุชูุญูุฏ ุนุฏุฏ ุงููุฑุงุญู) ุจุงูุถุจุท โ ุชู ุชูููุฐ ุงูุชุนุฏูู 2 (ุชูุถูุญ ุงููุฏุฉ ุงูุฒูููุฉ) ุจุงูุถุจุท โ ุชู ุชูููุฐ ุงูุชุนุฏูู 3 (ุญุณู ุงูุชูููุงุช) ุจุงูุถุจุท - ุญูุฐูุช ุฌููุน ุนุจุงุฑุงุช "ุฃู" โ ุชู ุชูููุฐ ุงูุชุนุฏูู 4 (Lock Timeout) ุจุงูุถุจุท - ุฃูุถูู ุงููุณู ูุงููุงู โ ุชู ุชูููุฐ ุงูุชุนุฏูู 5 (ุงูุฅุดุนุงุฑุงุช) ุจุงูุถุจุท - ุฃูุถูู ุงููุณู ูุงููุงู โ ุชู ุชูููุฐ ุงูุชุนุฏูู 6 (ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ) ุจุงูุถุจุท - ุงุณุชูุจุฏู ุงููุณู ูุงููุงู โ ุชู ุชูููุฐ ุงูุชุนุฏูู 7 (ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุฎุฒูู) ุจุงูุถุจุท - ุฃูุถูู ุงููุณู ูุงููุงู โ ูู ูุชู ุญุฐู ุฃู ูุญุชูู ุขุฎุฑ ูู ุงููุซููุฉ โ ุฌููุน ุฃููุงุฏ SQL ูC# ููุณููุฉ ุจุดูู ุตุญูุญ โ ุฌููุน ุงูุฌุฏุงูู ูุญุงุฐุงุฉ ุจุดูู ุตุญูุญ

---

## ๐ ููุงุญุธุงุช ูููุฉ ูููููุฐุฌ

1. **ูุง ุชูุนุฏูู ุฃู ุดูุก ุบูุฑ ูุฐููุฑ ุตุฑุงุญุฉ** ูู ูุฐู ุงูุชุนูููุงุช
2. **ูุง ุชูุถู ุชุนูููุงุช ุฃู ููุงุญุธุงุช ุดุฎุตูุฉ** ูู ุนูุฏู
3. **ุงุญุชูุธ ุจุฌููุน ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ** (๐๐โ๏ธ) ููุง ูู
4. **ุงุญุชูุธ ุจูู ุงูุชูุณููุงุช** (ASCII Artุ ุงูุฌุฏุงููุ ุตูุงุฏูู ุงูููุฏ)
5. ุนูุฏ ุงูุงุณุชุจุฏุงูุ **ุงุญุฐู ุงููุต ุงููุฏูู ุจุงููุงูู** ูุจู ุฅุถุงูุฉ ุงูุฌุฏูุฏ
6. ุนูุฏ ุงูุฅุถุงูุฉุ **ูุง ุชุญุฐู ุฃู ูุญุชูู ููุฌูุฏ**ุ ููุท ุฃุถู ูู ุงููููุน ุงููุญุฏุฏ

---

ูู ุจุชุนุฏูู ุงููุซููุฉ ุงููุฑููุฉ ููู ุงูุจุฑููุจุช ูุงูุชุจูุง ูุงููุฉ ูุฌุงูุฒุฉ

ุจูุงุกู ุนูู ุทูุจูุ ุณุฃููู ุงูุขู ุจุชุทุจูู ุงูุชุนุฏููุงุช ุงูุณุจุนุฉ ุงููุญุฏุฏุฉ ุนูู ุงููุซููุฉ ููุชุงุจุชูุง ูุงููุฉ. ูุธุฑุงู ูุทูู ุงููุซููุฉ ุงููุงูู (44,000 ุญุฑู)ุ ุณุฃูุฏู ุงููุซููุฉ ุงููุนุฏูุฉ ุจุงููุงูู ูุน ุฌููุน ุงูุชุนุฏููุงุช ุงููุทููุจุฉ:

***

# ๐ ูุซููุฉ ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงููุงููููุฉ - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู ุงููุญุณูู

**ุงููุณุฎุฉ**: 2.1 (ุงููุนุฏูุฉ)
**ุงูุชุงุฑูุฎ**: 21 ููููุจุฑ 2025

***

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุดุงููุฉ

ูุฐู ูุซููุฉ ุชุทููุฑ **ููุณููุฉ ุนูู 9 ูุฑุงุญู (ูุฑููุฉ ูู 0 ุฅูู 8)** ูุจูุงุก ูุธุงู ุฅุฏุงุฑุฉ ูุณุชูุฏุงุช ูุงููููุฉ ุฏุงุฎูู (on-premises) ูู10 ููุธูููุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุจุณุงุทุฉ ูุงููุถูุญ ูุงููุนุงููุฉ. ูู ูุฑุญูุฉ ุชุญุชูู ุนูู:

1. **ุงูุฃูุฏุงู ุงููุงุถุญุฉ**
2. **ุฎุทูุงุช ุงูุชูููุฐ ุงูุชูุตูููุฉ**
3. **ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ** (ูุถูุงู ุงูุงูุชูุงู ูุจู ุงูุงูุชูุงู)
4. **ููุงุท ุงูุชุญูู** (Checklist)

***

## ๐ ุงููุฑุงุญู ุงูุชุณุนุฉ (ูุฑููุฉ ูู 0 ุฅูู 8ุ ูุฑุชุจุฉ ุญุณุจ ุงูุฃููููุฉ)

### **ุงููุฑุญูุฉ 0: ุงูุชุญุถูุฑ ูุงูุฅุนุฏุงุฏ** โฑ๏ธ (ููู ูุงุญุฏ)

### **ุงููุฑุญูุฉ 1: ุงููููู ุงูุฃุณุงุณู** โฑ๏ธ (3-4 ุฃูุงู)

### **ุงููุฑุญูุฉ 2: ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงูุฃุณุงุณูุฉ** โฑ๏ธ (4-5 ุฃูุงู)

### **ุงููุฑุญูุฉ 3: Version Control + Check-in/Check-out** โฑ๏ธ (3-4 ุฃูุงู)

### **ุงููุฑุญูุฉ 4: ุงูุจุญุซ ุงููุชูุฏู + OCR** โฑ๏ธ (2-3 ุฃูุงู)

### **ุงููุฑุญูุฉ 5: ุฅุฏุงุฑุฉ ุงูุตุงุฏุฑ ูุงููุงุฑุฏ** โฑ๏ธ (2-3 ุฃูุงู)

### **ุงููุฑุญูุฉ 6: ุฅุณูุงุฏ ุงูููุงู** โฑ๏ธ (2-3 ุฃูุงู)

### **ุงููุฑุญูุฉ 7: ุงูุชูุงูู ูุน ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** โฑ๏ธ (2-3 ุฃูุงู)

### **ุงููุฑุญูุฉ 8: ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ูุงูุชูุซูู** โฑ๏ธ (3-5 ุฃูุงู)

**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ**: 23-31 ููู ุนูู

**ุงูุชูุตูู:**
- ุงููุฑุงุญู 0-7 (ุงูุชูููุฐ ุงูุฃุณุงุณู): 20-26 ููู ุนูู
- ุงููุฑุญูุฉ 8 (ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ูุงูุชูุซูู): 3-5 ุฃูุงู ุนูู ุฅุถุงููุฉ

***

# ๐ง ุงููุฑุญูุฉ 0: ุงูุชุญุถูุฑ ูุงูุฅุนุฏุงุฏ

## ๐ฏ ุงููุฏู

ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุงูุชูููุฉ ูุชุญุฏูุฏ ุงููุชุทูุจุงุช ูุงูุฃุฏูุงุช ูุจู ุงูุจุฏุก ุจุงูุชุทููุฑ

## ๐ ุงูููุงู

### 1. ุชุญุฏูุฏ ุงููุชุทูุจุงุช ุงูุชูููุฉ

```

ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุทููุจุฉ:
โโ ๐ฆ ุฎุงุฏู ุฏุงุฎูู (Server)
โ   โโ ูุธุงู ุงูุชุดุบูู: Windows Server 2019+ ุฃู Linux (Ubuntu 22.04+)
โ   โโ ุงููุนุงูุฌ: 4 Core CPU (Intel i5 ุฃู ุฃุนูู)
โ   โโ ุงูุฐุงูุฑุฉ: 16GB RAM ูุญุฏ ุฃุฏูู
โ   โโ ุงูุชุฎุฒูู: 500GB - 1TB (ุญุณุจ ุญุฌู ุงููููุงุช)
โ
โโ ๐๏ธ ูุงุนุฏุฉ ุจูุงูุงุช
โ   โโ PostgreSQL 14+ (ููุตู ุจู) ุฃู MySQL 8+
โ   โโ ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ูููุณุฎ ุงูุงุญุชูุงุทู
โ
โโ ๐พ ุชุฎุฒูู ุงููููุงุช
โ   โโ NAS (Network Attached Storage) ูููููุงุช ุงููุจูุฑุฉ
โ   โโ ูุธุงู ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู
โ
โโ ๐ ุงูุดุจูุฉ ุงูุฏุงุฎููุฉ
โโ ุดุจูุฉ LAN ุณุฑูุนุฉ (Gigabit Ethernet)
โโ ุนูุงููู IP ุซุงุจุชุฉ ููุฎุงุฏู

```


### 2. ุงุฎุชูุงุฑ ุชูููุงุช ุงูุชุทููุฑ

ุงูุญุฒูุฉ ุงูุชูููุฉ ุงููุนุชูุฏุฉ (ูุฑุงุฑ ููุงุฆู):

**โ๏ธ ุงููุฑุงุฑ ุงูุฅูุฒุงูู: ูุฌุจ ุญุณู ูุฐู ุงูุงุฎุชูุงุฑุงุช ูู ุงูููู ุงูุฃูู ูู ุงููุฑุญูุฉ 0**

```

โโ **Backend**: ASP.NET Core 8 (C\#)
โ   โโ ุงูุชุซุจูุช: dotnet --version (ููุชุญูู)
โ
โโ **Frontend**: Blazor Server
โ   โโ ูุฏูุฌ ูุน ASP.NET Core
โ
โโ **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: PostgreSQL 14+
โ   โโ ุงูุชุซุจูุช: sudo apt install postgresql-14
โ
โโ **ูุนุงูุฌุฉ PDF**: iText7
โ   โโ ุงูุชุซุจูุช: Install-Package itext7
โ
โโ **OCR**: Tesseract OCR 5.x
โ   โโ ุงูุชุซุจูุช Windows: choco install tesseract
โ   โโ ุงูุชุซุจูุช Linux: sudo apt install tesseract-ocr tesseract-ocr-ara
โ
โโ **ุงูุจุญุซ**: PostgreSQL Full-Text Search (ูุฏูุฌ)
โ   โโ ูุง ูุญุชุงุฌ ุชุซุจูุช ุฅุถุงูู
โ
โโ **ุงูุจุฑูุฏ**: MailKit
โ   โโ ุงูุชุซุจูุช: Install-Package MailKit
โ
โโ **ุงูููุงู ุงูุฎูููุฉ**: Hangfire
โโ ุงูุชุซุจูุช: Install-Package Hangfire.AspNetCore

```

**๐ ููุงุญุธุฉ ุญุงุณูุฉ**: ูุฐู ุงููุฑุงุฑุงุช ููุงุฆูุฉ ููุง ุฑุฌูุน ุนููุง. ุฃู ุฐูุฑ ูุจุฏุงุฆู (Laravelุ Vue.jsุ PDFTronุ Elasticsearch) ูู ุจููุฉ ุงููุซููุฉ ููุนุชุจุฑ ููุบูุงู.


### 3. ุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุชุทููุฑ

- ุชุซุจูุช Visual Studio 2022 ุฃู VS Code
- ุชุซุจูุช .NET 8 SDK
- ุชุซุจูุช PostgreSQL 14+ ูุญููุงู
- ุฅุนุฏุงุฏ Git ููุชุญูู ุจุงููุณุฎ
- ุฅูุดุงุก repository ุนูู GitHub/GitLab


### 4. ุชุตููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃูููุฉ

```sql
-- ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ (6 ุฌุฏุงูู)
Users (ุงููุณุชุฎุฏููู)
Documents (ุงููุณุชูุฏุงุช)
DocumentVersions (ุงูุฅุตุฏุงุฑุงุช)
Folders (ุงููุฌูุฏุงุช)
AuditLog (ุณุฌู ุงููุดุงุท)
Settings (ุงูุฅุนุฏุงุฏุงุช)
```


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

**ูุฌุจ ุฃู ูููู ูุฏูู ูู ููุงูุฉ ูุฐู ุงููุฑุญูุฉ:**


| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุฎุงุฏู ุฌุงูุฒ ููุดุบูู | ุงูุงุชุตุงู ุจุงูุฎุงุฏู ุนุจุฑ IP ุซุงุจุช |
| 2 | PostgreSQL ูุซุจุช ููุนูู | ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุนุจุฑ pgAdmin |
| 3 | ุจูุฆุฉ ุชุทููุฑ ูุงููุฉ | ุชุดุบูู ูุดุฑูุน ASP.NET Core ูุงุฑุบ ุจูุฌุงุญ |
| 4 | ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (ERD) | ููู ุตูุฑุฉ ููุฎุทุท ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู |
| 5 | Git Repository | ุฑุงุจุท GitHub/GitLab ูุน commit ุฃููู |

## ๐ ููุงุท ุงูุชุญูู (Checklist)

```
โ ุงูุฎุงุฏู ูุนูู ููููู ุงููุตูู ุฅููู ุนุจุฑ ุงูุดุจูุฉ ุงููุญููุฉ
โ PostgreSQL ููุจู ุงูุงุชุตุงูุงุช (ุงุฎุชุจุงุฑ ุจู pgAdmin)
โ Visual Studio/VS Code ูุนูู ููููู ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
โ Git repository ููุดุฃ ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
โ ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒ (6 ุฌุฏุงูู ุนูู ุงูุฃูู)
โ NAS/ูุฌูุฏ ุงูุชุฎุฒูู ุฌุงูุฒ ููุชุตู
```

**โ๏ธ ูุง ุชูุชูู ูููุฑุญูุฉ 1 ุฅูุง ุจุนุฏ ุชุญูู ุฌููุน ุงูููุงุท ุฃุนูุงู**

***

# ๐๏ธ ุงููุฑุญูุฉ 1: ุงููููู ุงูุฃุณุงุณู

## ๐ฏ ุงููุฏู

ุจูุงุก ุงููููู ุงูุฃุณุงุณู ูููุธุงู: ุชุณุฌูู ุงูุฏุฎููุ Dashboardุ ุงูููุงุฆูุ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

## ๐ ุงูููุงู

### 1. ุชูููุฐ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ

**ููู: `database-schema.sql`**

```sql
-- 1. ุฌุฏูู ุงููุณุชุฎุฏููู
CREATE TABLE Users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    role VARCHAR(20) NOT NULL, -- ูุฏูุฑุ ูุญุงูู_ุฑุฆูุณูุ ูุญุงูู_ูุณุงุนุฏุ ุฃุฑุดูุฉุ ูุฑุงุกุฉ_ููุท
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP
);

-- 2. ุฌุฏูู ุงููุฌูุฏุงุช
CREATE TABLE Folders (
    folder_id SERIAL PRIMARY KEY,
    parent_id INT REFERENCES Folders(folder_id) ON DELETE CASCADE,
    folder_name VARCHAR(100) NOT NULL,
    folder_path TEXT NOT NULL, -- /ูุถุงูุง-2025/ุนูุงุฑูุฉ/ูุถูุฉ-132
    created_by INT REFERENCES Users(user_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 3. ุฌุฏูู ุงููุณุชูุฏุงุช
CREATE TABLE Documents (
    document_id SERIAL PRIMARY KEY,
    folder_id INT REFERENCES Folders(folder_id),
    document_name VARCHAR(255) NOT NULL,
    document_type VARCHAR(50), -- ุตุญููุฉุ ุนูุฏุ ูุฐูุฑุฉุ ุญููุ ูุฑุงุณูุฉุ ูุงุชูุฑุฉ
    file_path TEXT NOT NULL, -- ุงููุณุงุฑ ุงููุนูู ุนูู NAS
    file_size BIGINT, -- ุจุงูุจุงูุช
    mime_type VARCHAR(50), -- application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document
    current_version INT DEFAULT 1,
    is_locked BOOLEAN DEFAULT FALSE,
    locked_by INT REFERENCES Users(user_id),
    locked_at TIMESTAMP,
    uploaded_by INT REFERENCES Users(user_id),
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    tags TEXT[], -- ูุตูููุฉ ุงููุณูู
    metadata JSONB -- ูุนูููุงุช ุฅุถุงููุฉ ูุฑูุฉ
);

-- 4. ุฌุฏูู ุงูุฅุตุฏุงุฑุงุช
CREATE TABLE DocumentVersions (
    version_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id) ON DELETE CASCADE,
    version_number INT NOT NULL,
    file_path TEXT NOT NULL,
    file_size BIGINT,
    is_final BOOLEAN DEFAULT FALSE,
    change_description TEXT,
    created_by INT REFERENCES Users(user_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 5. ุฌุฏูู ุณุฌู ุงููุดุงุท
CREATE TABLE AuditLog (
    log_id SERIAL PRIMARY KEY,
    user_id INT REFERENCES Users(user_id),
    action VARCHAR(50) NOT NULL, -- ุฑูุนุ ุชุนุฏููุ ุญุฐูุ ูููุ ูู_ูููุ ุชุญููู
    entity_type VARCHAR(20), -- document, folder, user
    entity_id INT,
    details TEXT,
    ip_address VARCHAR(45),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 6. ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช
CREATE TABLE Settings (
    setting_key VARCHAR(50) PRIMARY KEY,
    setting_value TEXT,
    description TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฅุถุงูุฉ Indexes ููุฃุฏุงุก
CREATE INDEX idx_documents_folder ON Documents(folder_id);
CREATE INDEX idx_documents_uploaded_by ON Documents(uploaded_by);
CREATE INDEX idx_versions_document ON DocumentVersions(document_id);
CREATE INDEX idx_audit_user ON AuditLog(user_id);
CREATE INDEX idx_audit_created ON AuditLog(created_at);
```


### 2. ุจูุงุก ูุธุงู ุชุณุฌูู ุงูุฏุฎูู (Authentication)

**ุงูููููุงุช:**

- ุตูุญุฉ Login (UI)
- Authentication Service (Backend)
- Session Management
- Password Hashing (BCrypt)

**ุงูููุฒุงุช:**

- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ (BCrypt)
- ุฌูุณุงุช ุขููุฉ (Cookies/JWT)
- ููู ุงูุญุณุงุจ ุจุนุฏ 3 ูุญุงููุงุช ุฎุงุทุฆุฉ (5 ุฏูุงุฆู)
- ุชุณุฌูู ุขุฎุฑ ุฏุฎูู


### 3. ุจูุงุก ุตูุญุฉ Dashboard ุงูุฑุฆูุณูุฉ

**ุงูุฃูุณุงู ุงููุทููุจุฉ:**

```
Dashboard
โโ Sidebar (ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ)
โ   โโ ๐ ุงููุณุชูุฏุงุช
โ   โโ ๐ ุงูุจุญุซ
โ   โโ โฌ๏ธ ุฑูุน ูููุงุช
โ   โโ ๐ ุงููุถุงูุง
โ   โโ ๐ ุงูุฅุญุตุงุฆูุงุช
โ   โโ โ๏ธ ุงูุฅุนุฏุงุฏุงุช
โ   โโ ๐ช ุชุณุฌูู ุฎุฑูุฌ
โ
โโ Main Content
โ   โโ ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ (4 ุจุทุงูุงุช)
โ   โโ ุงููููุงุช ุงููููููุฉ ุญุงููุงู
โ   โโ ุขุฎุฑ 20 ูุณุชูุฏ
โ   โโ ุชูุจููุงุช
โ
โโ Header
    โโ ุงุณู ุงููุธุงู
    โโ ุงุณู ุงููุณุชุฎุฏู + ุงูุฏูุฑ
    โโ ุฃููููุงุช (๐ ุฅุดุนุงุฑุงุชุ โ๏ธ ุฅุนุฏุงุฏุงุช)
```


### 4. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (ูููุฏูุฑ ููุท)

**ุงูุตูุญุงุช:**

- ูุงุฆูุฉ ุงููุณุชุฎุฏููู (ุฌุฏูู)
- ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ (ูููุฐุฌ)
- ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู
- ุชูุนูู/ุชุนุทูู ุญุณุงุจ

**ุงูุฃุฏูุงุฑ ุงูู7:**

1. ูุฏูุฑ (Admin)
2. ูุญุงูู ุฑุฆูุณู (Senior Lawyer)
3. ูุญุงูู ูุณุงุนุฏ (Junior Lawyer)
4. ุจุงุญุซ ูุงูููู (Legal Researcher)
5. ููุธู ุฃุฑุดูุฉ (Archiving Staff)
6. ูุญุงุณุจ (Accountant)
7. ูุฑุงุกุฉ ููุท (Read-only)

### 5. ุชุญุฏูุฏ ุขููุฉ ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ

**โ๏ธ ุงููุฑุงุฑ ุงูุฅูุฒุงูู: ุงุฎุชุฑ ุงูุฎูุงุฑ 1 (ุงูููุตู ุจู) ุฃู ุงูุฎูุงุฑ 2 ูู ููุงูุฉ ุงููุฑุญูุฉ 0**

***

#### **ุงูุฎูุงุฑ 1: Polling ุงูุจุณูุท** โ (ููุตู ุจู ููุจุฏุงูุฉ)

**ุงููุตู**: JavaScript ูู ุตูุญุฉ Dashboard ูุณุชุนูู ุนู ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู 30 ุซุงููุฉ.

**ุงููุฒุงูุง**:

- ุจุณูุท ุฌุฏุงู
- ูุง ูุญุชุงุฌ ุฅุนุฏุงุฏุงุช ุฎุงุตุฉ
- ูุนูู ูุน ุฃู ูุชุตูุญ

**ุงูุนููุจ**:

- ุชุฃุฎูุฑ ูุตู ุฅูู 30 ุซุงููุฉ
- ุญูู ุฅุถุงูู ุจุณูุท ุนูู ุงูุฎุงุฏู (ุงุณุชุนูุงู ูู 30 ุซุงููุฉ ร ุนุฏุฏ ุงููุณุชุฎุฏููู)

**ุงูููุฏ (ุฃุถู ูู Dashboard.razor):**

```javascript
<script>
// ุงุณุชุนูุงู ุฏูุฑู ุนู ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ
setInterval(async () => {
    try {
        const response = await fetch('/api/notifications/unread-count');
        const count = await response.json();
        const badge = document.getElementById('notification-badge');
        if (badge) {
            badge.textContent = count;
            badge.style.display = count > 0 ? 'inline' : 'none';
        }
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุฌูุจ ุงูุฅุดุนุงุฑุงุช:', error);
    }
}, 30000); // ูู 30 ุซุงููุฉ
</script>
```

**API Endpoint ุงููุทููุจ:**

```csharp
[HttpGet("api/notifications/unread-count")]
public async Task<IActionResult> GetUnreadCount()
{
    var userId = GetCurrentUserId();
    var count = await _db.Notifications
        .Where(n => n.user_id == userId && !n.is_read)
        .CountAsync();
    return Ok(count);
}
```


#### **ุงูุฎูุงุฑ 2: SignalR ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ** (ุงุฎุชูุงุฑู - ุชุนููุฏ ุฃุนูู)

**ุงููุตู**: ุงุชุตุงู WebSocket ุฏุงุฆู ุจูู ุงููุชุตูุญ ูุงูุฎุงุฏู ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ููุฑุงู (< 1 ุซุงููุฉ).

**ุงููุฒุงูุง**:

- ุฅุดุนุงุฑุงุช ููุฑูุฉ ุญููููุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ

**ุงูุนููุจ**:

- ุชุนููุฏ ุฃุนูู ูู ุงูุฅุนุฏุงุฏ
- ุงุณุชููุงู ุฐุงูุฑุฉ ุฃูุจุฑ (ุงุชุตุงู ููุชูุญ ููู ูุณุชุฎุฏู)

**ุฅุฐุง ุงุฎุชุฑุช ูุฐุง ุงูุฎูุงุฑ:**

**ุงูุชุซุจูุช:**

```
Install-Package Microsoft.AspNetCore.SignalR.Client
```

**ุฅูุดุงุก Hub:**

```csharp
// Hubs/NotificationHub.cs
public class NotificationHub : Hub
{
    public async Task SendNotificationToUser(int userId, string message)
    {
        await Clients.User(userId.ToString()).SendAsync("ReceiveNotification", message);
    }
}
```

**ุชุณุฌูู ูู Program.cs:**

```csharp
builder.Services.AddSignalR();
app.MapHub<NotificationHub>("/notificationHub");
```

**๐ ููุทุฉ ุชุญูู ุฅุถุงููุฉ:**

```
โ ุชู ุงุฎุชูุงุฑ ุงูุฎูุงุฑ (1 ุฃู 2) ูุชูุซููู ูู ููู DECISIONS.md
โ ุงูุขููุฉ ุงููุฎุชุงุฑุฉ ุชุนูู ุจูุฌุงุญ (ุงุฎุชุจุงุฑ ุจุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู)
โ ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช ูู Dashboard ูุชุญุฏุซ ุนูุฏ ุฅุถุงูุฉ ุฅุดุนุงุฑ ุฌุฏูุฏ
```


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุฐุฉ | 6 ุฌุฏุงูู ููุฌูุฏุฉ ูู PostgreSQL |
| 2 | ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุชุนูู | ุฅุฏุฎุงู username/password ูุงูุฏุฎูู ุจูุฌุงุญ |
| 3 | ุตูุญุฉ Dashboard ูุงููุฉ | ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ูุงูููุงุฆู ุงูุฌุงูุจูุฉ |
| 4 | ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุชุนูู | ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุณุชุฎุฏููู |
| 5 | ูุธุงู ุงูุตูุงุญูุงุช | ุงููุฏูุฑ ูุฑู ูู ุดูุกุ ุงูุขุฎุฑูู ูููุฏูู |
| 6 | ุณุฌู ุงููุดุงุท ููุณุฌูู | ุฌุฏูู AuditLog ูุณุฌู ุงูุฏุฎูู/ุงูุฎุฑูุฌ |

## ๐ ููุงุท ุงูุชุญูู

```
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู 6 ุฌุฏุงูู (Users, Documents, Folders, DocumentVersions, AuditLog, Settings)
โ ุชุณุฌูู ุงูุฏุฎูู ูุนูู ุจูุฌุงุญ (ุงุฎุชุจุงุฑ ุจูุณุชุฎุฏููู ูุฎุชูููู)
โ Dashboard ูุนุฑุถ ุงูุฅุญุตุงุฆูุงุช (ุญุชู ูู ูุงูุช ุตูุฑุงู)
โ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุชุนูู (ุงูููุฑ ุนูู ุงูุฑูุงุจุท ูููู ููุตูุญุงุช)
โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุชุนูู (ูููุฏูุฑ ููุท)
โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ ููุฌุญ ูุงููุณุชุฎุฏู ูุธูุฑ ูู ุงูุฌุฏูู
โ ุชุนุฏูู ูููุฉ ุงููุฑูุฑ ุชุนูู
โ ุชุณุฌูู ุงูุฎุฑูุฌ ููููู ุงูุฌูุณุฉ ููุนูุฏ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
โ ุณุฌู ุงููุดุงุท ูุณุฌู ูู ุฅุฌุฑุงุก (login, logout, add_user)
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 2**

***

# ๐ ุงููุฑุญูุฉ 2: ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงูุฃุณุงุณูุฉ

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุฑูุน ูุชุตูุญ ูุญุฐู ุงููุณุชูุฏุงุช ุงูุฃุณุงุณู

## ๐ ุงูููุงู

### 1. ุจูุงุก ุตูุญุฉ ุชุตูุญ ุงููุณุชูุฏุงุช

**ุงูููููุงุช:**

```
ุตูุญุฉ ุงููุณุชูุฏุงุช
โโ ุดุฌุฑุฉ ุงููุฌูุฏุงุช (Sidebar)
โ   โโ ุนุฑุถ ูุฑูู (Tree View)
โ   โโ ุชูุณูุน/ุทู ุงููุฌูุฏุงุช
โ   โโ ุฒุฑ "+ ูุฌูุฏ ุฌุฏูุฏ"
โ
โโ ูุงุฆูุฉ ุงููููุงุช (Main)
    โโ ุดุฑูุท ุจุญุซ ุณุฑูุน
    โโ ููุงุชุฑ ููุน ุงูููู
    โโ ุฌุฏูู ุงููููุงุช (ุงุณูุ ููุนุ ุญุฌูุ ุชุงุฑูุฎุ ุฑุงูุน)
    โโ ุฃุฒุฑุงุฑ: ุนุฑุถุ ุชุญูููุ ุญุฐู
```


### 2. ุจูุงุก ูุธุงู ุฑูุน ุงููููุงุช

**ุงูุฎุทูุงุช:**

1. **ุตูุญุฉ ุฑูุน ุงููููุงุช**
    - ููุทูุฉ Drag \& Drop
    - ุฒุฑ "ุงุฎุชุฑ ูู ุงูุฌูุงุฒ"
    - ุฏุนู ุฑูุน ูุชุนุฏุฏ (ุญุชู 50 ููู)
    - ุฃููุงุน ูุฏุนููุฉ: PDF, DOCX, XLSX, JPG, PNG, MSG
2. **ูููุฐุฌ ุงูุชุตููู**
```
โโ ุงููุฌูุฏ ุงููุฌูุฉ (dropdown)
โโ ููุน ุงููุณุชูุฏ (dropdown)
โโ ุฑูู ุงููุถูุฉ (text)
โโ ุงูุนููู (text/dropdown)
โโ ุงููุณูู (tags input)
โโ ููุงุญุธุงุช (textarea)
```

3. **Backend Processing**
    - ุฑูุน ุงูููู ููุณุงุฑ NAS
    - ุญูุธ ุงูุจูุงูุงุช ูู ุฌุฏูู Documents
    - ุฅูุดุงุก ุฅุตุฏุงุฑ ุฃููู (v1.0) ูู DocumentVersions
    - ุชุณุฌูู ุงูุฅุฌุฑุงุก ูู AuditLog

### 2.5 ุงุณุชุฑุงุชูุฌูุฉ ุชุฎุฒูู ุงููููุงุช ุงููุนููุฉ (File Storage Strategy)

**โ๏ธ ูุฑุงุฑ ูุนูุงุฑู ุญุงุณู**

**ุงููุดููุฉ**: ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ุจุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ ูุญุชูู ุนูู 1000 ูููุ ูู ููุนูุฏ ุชุณููุฉ ุงููุฌูุฏ ุงููุนูู ุนูู NAS ูููุญุฏูุซ 1000 ูุณุงุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุฐุง ุฎุทูุฑ ูุจุทูุก!

**ุงูุญู ุงููุนุชูุฏ: GUID-Based Storage**

**ุงููุจุฏุฃ**:

- ุงููููุงุช ุชูุฎุฒู ุนูู NAS ุจุฃุณูุงุก ูุฑูุฏุฉ (GUID) ุจุฏูู ุฃู ูููู ูุฌูุฏุงุช
- ูููู ุงููุฌูุฏุงุช ุงูุฐู ูุฑุงู ุงููุณุชุฎุฏู ูู **ูุฌุฑุฏ ุชูุซูู ููุทูู (Logical View)** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ = ุชุญุฏูุซ ุณุทุฑ ูุงุญุฏ ูู ุฌุฏูู Folders (ุจุฏูู ููุณ ุงููููุงุช ุงููุนููุฉ)

**ูุซุงู:**


| ูุง ูุฑุงู ุงููุณุชุฎุฏู | ุงููุณุงุฑ ุงููุนูู ุนูู NAS |
| :-- | :-- |
| `/ูุถุงูุง-2025/ุนูุงุฑูุฉ/ุนูุฏ-ุจูุน.pdf` | `/storage/3f2a8b4c-1d5e-4a9b-8f3c-9e1b2d4a7c5f.pdf` |
| `/ูุถุงูุง-2025/ุชุฌุงุฑูุฉ/ูุฐูุฑุฉ.docx` | `/storage/7a1b9e3d-4f2c-8a5b-1e9d-6c3f8b2a4d7e.docx` |

**ุงูุชูููุฐ:**

**ุชุนุฏูู ุฌุฏูู Documents:**

```sql
ALTER TABLE Documents 
ADD COLUMN file_guid UUID DEFAULT gen_random_uuid();

-- ุงููุณุงุฑ ุงููุนูู ููุจูู ูู GUID ููุท
-- file_path = '/mnt/nas/storage/' + file_guid + '.pdf'
```

**ููุฏ ุงูุฑูุน (Pseudo-code):**

```csharp
public async Task<IActionResult> UploadFile(IFormFile file, int folderId)
{
    // ุชูููุฏ GUID ูุฑูุฏ
    var fileGuid = Guid.NewGuid();
    var extension = Path.GetExtension(file.FileName);
    var physicalPath = $"/mnt/nas/storage/{fileGuid}{extension}";
    
    // ุญูุธ ุงูููู ุจุงููุณุงุฑ ุงููุนูู
    using (var stream = new FileStream(physicalPath, FileMode.Create))
    {
        await file.CopyToAsync(stream);
    }
    
    // ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    var document = new Document
    {
        document_name = file.FileName,  // ุงูุงุณู ุงูุฃุตูู ููุนุฑุถ
        file_guid = fileGuid,            // ูููุตูู ุงููุนูู
        file_path = physicalPath,        // ุงููุณุงุฑ ุงููุงูู
        folder_id = folderId             // ุงูุฑุจุท ุงูููุทูู ููุท
    };
    
    await _db.Documents.AddAsync(document);
    await _db.SaveChangesAsync();
    
    return Ok();
}
```

**ุงูููุงุฆุฏ:**

- โ ุฅุนุงุฏุฉ ุชุณููุฉ ุงููุฌูุฏุงุช ููุฑูุฉ (ุชุญุฏูุซ ูุตู ููุท)
- โ ููู ุงููููุงุช ุจูู ุงููุฌูุฏุงุช ููุฑู (ุชุญุฏูุซ folder_id ููุท)
- โ ูุง ุฎุทุฑ ูู ุชุตุงุฏู ุงูุฃุณูุงุก (GUID ูุฑูุฏ)
- โ ุณูููุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู (ูุฌูุฏ ูุงุญุฏ ูุณุทุญ)

**ููุทุฉ ุชุญูู ุฅุถุงููุฉ:**

```
โ ุชู ุฅุถุงูุฉ ุนููุฏ file_guid ูู ุฌุฏูู Documents
โ ููุฏ ุงูุฑูุน ูุณุชุฎุฏู GUID ููุชุฎุฒูู ุงููุนูู
โ ุงุฎุชุจุงุฑ: ุฅุนุงุฏุฉ ุชุณููุฉ ูุฌูุฏ ูุญุชูู ุนูู 100 ููู ุชุชู ุฎูุงู < 100ms
โ ุงุฎุชุจุงุฑ: ููู ููู ุจูู ูุฌูุฏูู ูุชู ุฎูุงู < 50ms
```


### 3. ูุนุงููุฉ ุงููุณุชูุฏุงุช

**ููู ููุน ููู:**

- **PDF**: ุนุงุฑุถ PDF ูุฏูุฌ (PDF.js)
- **Word/Excel**: ุชุญููู ูุคูุช ููPDF ุซู ุนุฑุถู (ุฃู ุฑุณุงูุฉ "ุญููู ููุนุฑุถ")
- **ุงูุตูุฑ**: ุนุงุฑุถ ุตูุฑ ุจุณูุท
- **MSG**: ุนุฑุถ ููุถูุน ุงูุฑุณุงูุฉุ ุงููุฑุณูุ ุงูุชุงุฑูุฎุ ุงููุฑููุงุช


### 4. ุญุฐู ุงููุณุชูุฏุงุช

**ุงูููุฒุงุช:**

- ุญุฐู "ูุงุนู" (Soft Delete) - ุชุนุทูู ุจุฏูุงู ูู ุญุฐู ูุนูู
- ุชุฃููุฏ ุงูุญุฐู (ุฑุณุงูุฉ ุชุญุฐูุฑ)
- ุงููุฏูุฑ ููุท ููููู ุงูุญุฐู ุงูููุงุฆู
- ุชุณุฌูู ุงูุญุฐู ูู AuditLog


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุตูุญุฉ ุงููุณุชูุฏุงุช ุชุนูู | ุนุฑุถ ุดุฌุฑุฉ ุงููุฌูุฏุงุช ููุงุฆูุฉ ุงููููุงุช |
| 2 | ุฑูุน ููู PDF ููุฌุญ | ุงูููู ููุฎุฒู ูู NAS ููุธูุฑ ูู ุงููุงุฆูุฉ |
| 3 | ุฑูุน ููู Word ููุฌุญ | ุงูููู ููุฎุฒู ููุธูุฑ |
| 4 | ุฑูุน ุนุฏุฉ ูููุงุช ุฏูุนุฉ ูุงุญุฏุฉ | ุฌููุน ุงููููุงุช ุชูุฎุฒู |
| 5 | ูุนุงููุฉ PDF ุชุนูู | ูุชุญ PDF ูู ุนุงุฑุถ ูุฏูุฌ |
| 6 | ุชุญููู ููู ูุนูู | ุงูููู ููุญููู ููุฌูุงุฒ |
| 7 | ุญุฐู ููู ูุนูู | ุงูููู ูุฎุชูู ูู ุงููุงุฆูุฉ |
| 8 | ุดุฌุฑุฉ ุงููุฌูุฏุงุช ุชุนูู | ุงูููุฑ ุนูู ูุฌูุฏ ูุนุฑุถ ูุญุชููุงุชู |

## ๐ ููุงุท ุงูุชุญูู

```
โ ุฑูุน ููู PDF ูุงุญุฏ ููุฌุญ ููุธูุฑ ูู ุงููุงุฆูุฉ
โ ุฑูุน 5 ูููุงุช ุฏูุนุฉ ูุงุญุฏุฉ ููุฌุญ
โ ุงููููุงุช ุชูุฎุฒู ูุนููุงู ูู NAS (ุชุญูู ูู ุงููุฌูุฏ)
โ ุฌุฏูู Documents ูุญุชูู ุนูู ุงูุณุฌูุงุช ุงูุตุญูุญุฉ
โ ูุนุงููุฉ PDF ุชุนูู (ุนุฑุถ ูุญุชูู ุงูููู)
โ ุชุญููู ููู ูุนูู (ุงูููู ููุญูู ุจููุณ ุงูุงุณู ุงูุฃุตูู)
โ ุญุฐู ููู ูุนูู (ุงูููู ูุฎุชูู ูู ุงููุงุฆูุฉ)
โ ุณุฌู ุงููุดุงุท ููุณุฌู: upload, view, download, delete
โ ุดุฌุฑุฉ ุงููุฌูุฏุงุช ุชุนุฑุถ ุงููุฌูุฏุงุช ุงููุฑููุฉ
โ ุงูููุฑ ุนูู ูุฌูุฏ ููุตูู ุงููููุงุช ููุนุฑุถ ูุญุชููุงุชู ููุท
โ ุฒุฑ "+ ูุฌูุฏ ุฌุฏูุฏ" ูุนูู ููููุดุฆ ูุฌูุฏ ูุฑุนู
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 3**

***

# ๐ ุงููุฑุญูุฉ 3: Version Control + Check-in/Check-out

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุงูุชุญูู ุจุงูุฅุตุฏุงุฑุงุช ููุธุงู ููู ุงููููุงุช

## ๐ ุงูููุงู

### 1. ุตูุญุฉ ุชูุงุตูู ุงููุณุชูุฏ

**ุงูุฃูุณุงู:**

```
ุตูุญุฉ ุงูุชูุงุตูู
โโ ูุนูููุงุช ุงูููู (ุงูุฃุนูู)
โ   โโ ุงูุงุณูุ ุงูููุนุ ุงูุญุฌูุ ุงููุถูุฉุ ุงูุนููู
โ   โโ ุงูุฅุตุฏุงุฑ ุงูุญุงูู (v2.1)
โ   โโ ุงูุญุงูุฉ: ููุชูุญ/ููููู
โ   โโ ุฃุฒุฑุงุฑ: ุชุญูููุ ุชุนุฏููุ ูููุ ุญุฐู
โ
โโ ุณุฌู ุงูุฅุตุฏุงุฑุงุช
โ   โโ ูุงุฆูุฉ ุฌููุน ุงูุฅุตุฏุงุฑุงุช (v1.0, v1.1, v2.0, v2.1)
โ   โโ ููู ุฅุตุฏุงุฑ: ุงูุฑููุ ุงูุชุงุฑูุฎุ ูู ุนุฏูููุ ูุตู ุงูุชุนุฏูู
โ   โโ ุฃุฒุฑุงุฑ: ุนุฑุถุ ุชุญูููุ ุงุณุชุฑุฌุงุนุ ููุงุฑูุฉ
โ
โโ ูุนุงููุฉ ุงููุณุชูุฏ
โ   โโ ุนุงุฑุถ PDF/Word ูุฏูุฌ
โ
โโ ุงูููุงุญุธุงุช
    โโ ูุธุงู ุชุนูููุงุช ุจุณูุท
```


### 2. ูุธุงู Check-in/Check-out

**ุงูุฎุทูุงุช:**

**Check-out (ููู ุงูููู):**

1. ุงููุณุชุฎุฏู ูููุฑ "๐ ููู"
2. ุงููุธุงู ูุชุญูู: ูู ุงูููู ูููููุ
3. ุฅุฐุง ูุงุ ููููู ุจูุงุณุทุฉ ุงููุณุชุฎุฏู ุงูุญุงูู:
```sql
UPDATE Documents 
SET is_locked = TRUE, 
    locked_by = current_user_id, 
    locked_at = CURRENT_TIMESTAMP
WHERE document_id = ?
```

4. ุฑุณุงูุฉ: "โ ุชู ููู ุงูููู. ููููู ุงูุขู ุชุนุฏููู"
5. ุชุณุฌูู ูู AuditLog: `check_out`

**Check-in (ูู ุงูููู + ุญูุธ ุฅุตุฏุงุฑ ุฌุฏูุฏ):**

1. ุงููุณุชุฎุฏู ููุชูู ูู ุงูุชุนุฏูู ููุฑูุน ุงูููู ุงููุนุฏู
2. ุงููุธุงู:
    - ูุญูุธ ุงูููู ุงูุฌุฏูุฏ ูู NAS
    - ูููุดุฆ ุณุฌู ุฌุฏูุฏ ูู DocumentVersions
    - ูุฒูุฏ `current_version` ูู Documents
    - ููู ุงูููู (is_locked = FALSE)
3. ุฑุณุงูุฉ: "โ ุชู ุญูุธ ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ v2.2"
4. ุชุณุฌูู ูู AuditLog: `check_in`

**ูู ุงูููู ุงูุฅุฌุจุงุฑู (ูููุฏูุฑ ููุท):**

- ุฒุฑ "๐ ูู ุงูููู ุฅุฌุจุงุฑููุง"
- ุชุญุฐูุฑ: "โ๏ธ ูุฐุง ุณูููุบู ููู ุงููุณุชุฎุฏู [ููุงู]"
- ุชุณุฌูู ูู AuditLog: `force_unlock`


### **ุขููุฉ Lock Timeout ุงูุชููุงุฆู (8 ุณุงุนุงุช)**

**ุงููุจุฏุฃ**: ุฃู ููู ููููู ูุฃูุซุฑ ูู 8 ุณุงุนุงุช ูููู ูููู ุชููุงุฆูุงู ูููุน ุญุฌุฒ ุงููููุงุช ุฅูู ุงูุฃุจุฏ.

**ุงูุชูููุฐ ุจุงุณุชุฎุฏุงู Hangfire Background Service:**

**ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ููุฏ ูู Program.cs**

```csharp
// ูู Program.cs ุจุนุฏ services.AddControllers()
services.AddHangfire(config => config.UsePostgreSqlStorage(connectionString));
services.AddHangfireServer();

// ุชุณุฌูู ุงููููุฉ ุงููุชูุฑุฑุฉ
RecurringJob.AddOrUpdate(
    "unlock-timeout-files",
    () => UnlockTimedOutDocuments(),
    Cron.Minutely(30) // ูู 30 ุฏูููุฉ
);
```

**ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุฏุงูุฉ ูู ุงูููู**

```csharp
public static async Task UnlockTimedOutDocuments()
{
    using var connection = new NpgsqlConnection(connectionString);
    var sql = @"
        UPDATE Documents 
        SET is_locked = false, 
            locked_by = NULL, 
            locked_at = NULL
        WHERE is_locked = true 
          AND locked_at < NOW() - INTERVAL '8 hours'
        RETURNING document_id, document_name;
    ";
    
    var unlockedDocs = await connection.QueryAsync(sql);
    
    // ุชุณุฌูู ูู AuditLog
    foreach (var doc in unlockedDocs)
    {
        await connection.ExecuteAsync(@"
            INSERT INTO AuditLog (user_id, action, entity_type, entity_id, details)
            VALUES (NULL, 'auto_unlock', 'document', @id, 'Timeout after 8 hours')
        ", new { id = doc.document_id });
    }
}
```

**ููุทุฉ ุชุญูู ุฅุถุงููุฉ:**

```
โ Hangfire Dashboard ูุนูู ุนูู /hangfire ููุธูุฑ ุงููููุฉ "unlock-timeout-files"
โ ุงุฎุชุจุงุฑ: ููู ููู ูุฏููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (locked_at ูุจู 9 ุณุงุนุงุช) ูุงูุชุญูู ูู ูู ุงูููู ุงูุชููุงุฆู
โ AuditLog ูุณุฌู ุฅุฌุฑุงุก "auto_unlock" ุนูุฏ ุญุฏูุซู
```


### 3. ููุงุฑูุฉ ุงูุฅุตุฏุงุฑุงุช (Diff)

**ูููููุงุช ุงููุตูุฉ ููุท (Word, TXT):**

1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุฅุตุฏุงุฑูู
2. ุงููุธุงู ูุณุชุฎุฑุฌ ุงููุต ูู ููุง ุงูุฅุตุฏุงุฑูู
3. ููุจุฑุฒ ุงููุฑููุงุช:
    - **ุงูุฃุฎุถุฑ**: ุฅุถุงูุงุช
    - **ุงูุฃุญูุฑ**: ุญุฐู
    - **ุงูุฃุตูุฑ**: ุชุนุฏููุงุช
4. ุนุฑุถ ูู ุตูุญุฉ ูููุตูุฉ

**ูููPDF:**

- ุฑุณุงูุฉ: "ุงูููุงุฑูุฉ ุบูุฑ ูุฏุนููุฉ ูููPDF. ุญููู ุงูุฅุตุฏุงุฑูู ููุงุฑู ูุฏููุงู."


### 4. ุงุณุชุฑุฌุงุน ุฅุตุฏุงุฑ ุณุงุจู

**ุงูุฎุทูุงุช:**

1. ุงููุณุชุฎุฏู ูููุฑ "โฉ๏ธ ุงุณุชุฑุฌุงุน" ุนูู ุฅุตุฏุงุฑ ูุฏูู (ูุซูุงู v1.1)
2. ุชุฃููุฏ: "โ๏ธ ูู ุชุฑูุฏ ุฌุนู v1.1 ูู ุงูุฅุตุฏุงุฑ ุงูุญุงููุ"
3. ุงููุธุงู:
    - ููุณุฎ ุงูููู ูู v1.1
    - ูููุดุฆ ุฅุตุฏุงุฑ ุฌุฏูุฏ (v2.3) ุจููุณ ูุญุชูู v1.1
    - ูุญุฏูุซ `current_version` = 2.3
4. ุฑุณุงูุฉ: "โ ุชู ุงุณุชุฑุฌุงุน v1.1 ูุฅุตุฏุงุฑ ุฌุฏูุฏ v2.3"

## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุตูุญุฉ ุชูุงุตูู ุงููุณุชูุฏ ูุงููุฉ | ุนุฑุถ ุฌููุน ุงูุฃูุณุงู (ูุนูููุงุชุ ุฅุตุฏุงุฑุงุชุ ูุนุงููุฉุ ููุงุญุธุงุช) |
| 2 | Check-out ูุนูู | ููู ููู ูุธูุฑ "๐ ููููู - [ุงุณู ุงููุณุชุฎุฏู]" |
| 3 | Check-in ูุนูู | ุฑูุน ููู ูุนุฏู ููุดุฆ ุฅุตุฏุงุฑ ุฌุฏูุฏ |
| 4 | ุณุฌู ุงูุฅุตุฏุงุฑุงุช ูุงูู | ุนุฑุถ ุฌููุน ุงูุฅุตุฏุงุฑุงุช ูุน ุงูุชูุงุฑูุฎ |
| 5 | ูู ุงูููู ุงูุฅุฌุจุงุฑู | ุงููุฏูุฑ ููููู ูู ุฃู ููู |
| 6 | ููุงุฑูุฉ ุงูุฅุตุฏุงุฑุงุช | ุนุฑุถ ุงููุฑููุงุช ุจูู ุฅุตุฏุงุฑูู (Word ููุท) |
| 7 | ุงุณุชุฑุฌุงุน ุฅุตุฏุงุฑ | ุงุณุชุฑุฌุงุน v1.0 ููุดุฆ ุฅุตุฏุงุฑ ุฌุฏูุฏ |

## ๐ ููุงุท ุงูุชุญูู

```
โ ููู ููู (Check-out) ูุนูู ููุณุฌู ูู AuditLog
โ ูุญุงููุฉ ููู ููู ููููู ุชุธูุฑ ุฑุณุงูุฉ: "ููููู ุจูุงุณุทุฉ [ููุงู] ููุฐ [ููุช]"
โ ุฑูุน ููู ูุนุฏู (Check-in) ููุดุฆ ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู DocumentVersions
โ current_version ูุฒูุฏ ุชููุงุฆูุงู (ูู v1.0 โ v1.1)
โ ุณุฌู ุงูุฅุตุฏุงุฑุงุช ูุนุฑุถ ุฌููุน ุงูุฅุตุฏุงุฑุงุช ุจุงูุชุฑุชูุจ
โ ุชุญููู ุฅุตุฏุงุฑ ูุฏูู ูุนูู (ูุญููู ุงูููู ุงูุตุญูุญ)
โ ูู ุงูููู ุงูุฅุฌุจุงุฑู (ูููุฏูุฑ) ูุนูู ููุณุฌู
โ ููุงุฑูุฉ ุฅุตุฏุงุฑูู (Word) ุชุนุฑุถ ุงููุฑููุงุช
โ ุงุณุชุฑุฌุงุน ุฅุตุฏุงุฑ ูุฏูู ููุดุฆ ุฅุตุฏุงุฑ ุฌุฏูุฏ
โ Lock timeout: ุงูููู ูููู ุชููุงุฆูุงู ุจุนุฏ 8 ุณุงุนุงุช (ุงุฎุชุจุงุฑู)
โ Hangfire Dashboard ูุนูู ุนูู /hangfire
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 4**

***



# ๐ ุงููุฑุญูุฉ 4: ุงูุจุญุซ ุงููุชูุฏู + OCR

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุจุญุซ ููู ูุน ูุนุงูุฌุฉ OCR ูููุณุชูุฏุงุช ุงูููุณูุญุฉ

## ๐ ุงูููุงู

### 1. ุจูุงุก ูุงุฌูุฉ ุงูุจุญุซ ุงููุชูุฏู

**ุงูุตูุญุฉ:**

```
ุตูุญุฉ ุงูุจุญุซ
โโ ุดุฑูุท ุงูุจุญุซ ุงูุฑุฆูุณู
โ   โโ ุญูู ูุต ูุจูุฑ
โ   โโ ุฒุฑ "ุจุญุซ ูุชูุฏู" (ููุชุญ ูููุฐุฌ ููุณูุน)
โ   โโ ุฃููููุฉ ๐
โ
โโ ุงูููุงุชุฑ (ูู ุงูุดุฑูุท ุงูุฌุงูุจู)
โ   โโ ููุน ุงููุณุชูุฏ (checkboxes)
โ   โโ ุงููุฌูุฏ (dropdown)
โ   โโ ุงูุชุงุฑูุฎ (ูู - ุฅูู)
โ   โโ ุฑุงูุน ุงูููู (dropdown)
โ   โโ ุงูุญุฌู (ูู - ุฅูู KB)
โ   โโ ุงููุณูู (multi-select)
โ
โโ ูุชุงุฆุฌ ุงูุจุญุซ
    โโ ุนุฏุฏ ุงููุชุงุฆุฌ (247 ูุณุชูุฏ)
    โโ ุชุฑุชูุจ ุญุณุจ: ุงูุฃุญุฏุซุ ุงูุฃูุฏูุ ุงูุฃูุจุฑุ ุงูุฃุตุบุฑ
    โโ ูุงุฆูุฉ ุงููุชุงุฆุฌ (ูุน ุฅุจุฑุงุฒ ุงููุต ุงููุทุงุจู)
```


### 2. ุชูููุฐ ุงูุจุญุซ ูู PostgreSQL Full-Text Search

**ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ุนููุฏ ุงูุจุญุซ**

```sql
-- ุฅุถุงูุฉ ุนููุฏ ููุจุญุซ ุงููุตู
ALTER TABLE Documents 
ADD COLUMN search_vector tsvector;

-- ุฅูุดุงุก ุฏุงูุฉ ูุชุญุฏูุซ ุนููุฏ ุงูุจุญุซ
CREATE OR REPLACE FUNCTION documents_search_trigger() RETURNS trigger AS $$
BEGIN
  NEW.search_vector := 
    setweight(to_tsvector('arabic', COALESCE(NEW.document_name, '')), 'A') ||
    setweight(to_tsvector('arabic', COALESCE(NEW.document_type, '')), 'B') ||
    setweight(to_tsvector('arabic', COALESCE(array_to_string(NEW.tags, ' '), '')), 'C') ||
    setweight(to_tsvector('arabic', COALESCE(NEW.metadata->>'content', '')), 'D');
  RETURN NEW;
END
$$ LANGUAGE plpgsql;

-- ุชุดุบูู ุงูุฏุงูุฉ ุชููุงุฆูุงู
CREATE TRIGGER documents_search_update 
BEFORE INSERT OR UPDATE ON Documents
FOR EACH ROW EXECUTE FUNCTION documents_search_trigger();

-- ุฅูุดุงุก Index ููุฃุฏุงุก
CREATE INDEX documents_search_idx ON Documents USING GIN(search_vector);
```

**ุงูุฎุทูุฉ 2: ุงุณุชุนูุงู ุงูุจุญุซ**

```sql
-- ุงูุจุญุซ ุงูุจุณูุท
SELECT document_id, document_name, 
       ts_rank(search_vector, query) AS rank
FROM Documents, 
     to_tsquery('arabic', 'ุนูุฏ | ุจูุน') query
WHERE search_vector @@ query
ORDER BY rank DESC
LIMIT 50;

-- ุงูุจุญุซ ุงููุชูุฏู ูุน ููุงุชุฑ
SELECT * FROM Documents
WHERE search_vector @@ to_tsquery('arabic', 'ุนูุฏ & ุนูุงุฑ')
  AND document_type = 'ุนูุฏ'
  AND uploaded_at BETWEEN '2025-01-01' AND '2025-12-31'
  AND folder_id IN (SELECT folder_id FROM Folders WHERE folder_path LIKE '/ูุถุงูุง-2025/%')
ORDER BY uploaded_at DESC;
```


### 3. ูุนุงูุฌุฉ OCR ูููุณุชูุฏุงุช ุงูููุณูุญุฉ

**ุงููุจุฏุฃ:**

- ุนูุฏ ุฑูุน ููู PDF/ุตูุฑุฉ
- ููุถุงู ูู **OCR Queue**
- Worker background ูุนุงูุฌ Queue ูู 5 ุฏูุงุฆู
- ูุณุชุฎุฑุฌ ุงููุต ููุญูุธู ูู metadata->>'ocr_text'

**ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุฌุฏูู OCR Queue**

```sql
CREATE TABLE OCRQueue (
    queue_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id) ON DELETE CASCADE,
    status VARCHAR(20) DEFAULT 'pending', -- pending, processing, completed, failed
    error_message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    processed_at TIMESTAMP
);
```

**ุงูุฎุทูุฉ 2: Worker background (Pseudo-code)**

```csharp
// Hangfire Job
[AutomaticRetry(Attempts = 3)]
public async Task ProcessOCRQueue()
{
    var pendingItems = await _db.OCRQueue
        .Where(q => q.status == "pending")
        .Take(10) // ูุนุงูุฌุฉ 10 ูู ุงููุฑุฉ ุงููุงุญุฏุฉ
        .ToListAsync();
    
    foreach (var item in pendingItems)
    {
        try
        {
            // ุชุญุฏูุซ ุงูุญุงูุฉ
            item.status = "processing";
            await _db.SaveChangesAsync();
            
            // ุฌูุจ ุงูููู
            var doc = await _db.Documents.FindAsync(item.document_id);
            var filePath = doc.file_path;
            
            // ุชุดุบูู Tesseract
            var ocrText = await RunTesseract(filePath);
            
            // ุญูุธ ุงููุต ูู metadata
            doc.metadata = doc.metadata ?? new JsonObject();
            doc.metadata["ocr_text"] = ocrText;
            
            // ุชุญุฏูุซ search_vector ููุดูู ูุต OCR
            await _db.Database.ExecuteSqlRawAsync(@"
                UPDATE Documents 
                SET search_vector = search_vector || 
                    to_tsvector('arabic', {0})
                WHERE document_id = {1}
            ", ocrText, doc.document_id);
            
            // ุชุญุฏูุซ ุงูุญุงูุฉ
            item.status = "completed";
            item.processed_at = DateTime.Now;
        }
        catch (Exception ex)
        {
            item.status = "failed";
            item.error_message = ex.Message;
        }
        
        await _db.SaveChangesAsync();
    }
}

// ุชุณุฌูู ุงููููุฉ ูู Program.cs
RecurringJob.AddOrUpdate(
    "process-ocr-queue",
    () => ProcessOCRQueue(),
    Cron.MinuteInterval(5)
);
```

**ุงูุฎุทูุฉ 3: ุฏุงูุฉ ุชุดุบูู Tesseract**

```csharp
private async Task<string> RunTesseract(string filePath)
{
    var process = new Process
    {
        StartInfo = new ProcessStartInfo
        {
            FileName = "tesseract",
            Arguments = $"{filePath} stdout -l ara+eng", // ุนุฑุจู + ุฅูุฌููุฒู
            RedirectStandardOutput = true,
            UseShellExecute = false,
            CreateNoWindow = true
        }
    };
    
    process.Start();
    var output = await process.StandardOutput.ReadToEndAsync();
    await process.WaitForExitAsync();
    
    return output;
}
```


### 4. ุฅุจุฑุงุฒ ุงููุชุงุฆุฌ (Highlighting)

ูู ุตูุญุฉ ุงููุชุงุฆุฌุ ุฅุจุฑุงุฒ ุงููููุงุช ุงููุทุงุจูุฉ:

```csharp
// Pseudo-code
var snippet = ts_headline('arabic', document_name, query, 
                          'MaxWords=20, MinWords=10, StartSel=<mark>, StopSel=</mark>');
```

**ุงููุชูุฌุฉ:**

> "...ูุงูู ุงูุทุฑูุงู ุนูู **<mark>ุนูุฏ</mark>** **<mark>ุจูุน</mark>** ุงูุนูุงุฑ ุงููุงูุน..."

## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุตูุญุฉ ุงูุจุญุซ ุชุนูู | ุงูุจุญุซ ุนู "ุนูุฏ" ูุนุฑุถ ุงููุชุงุฆุฌ |
| 2 | ุงูุจุญุซ ูู ุฃุณูุงุก ุงููููุงุช | ุงูุจุญุซ ูุฌุฏ ูููุงุช ุจุฃุณูุงุก ูุทุงุจูุฉ |
| 3 | ุงูุจุญุซ ูู ุงููุณูู | ุงูุจุญุซ ุนู ูุณู ูุนูู ูุนุฑุถ ุงููููุงุช |
| 4 | ุงูููุงุชุฑ ุชุนูู | ุชุทุจูู ููุชุฑ ููุน ุงููุณุชูุฏ ูุตูู ุงููุชุงุฆุฌ |
| 5 | OCR Queue ูุนูู | ุฑูุน PDF ููุณูุญ ูุถููู ูููQueue |
| 6 | OCR Processing ูุนูู | Worker ูุนุงูุฌ Queue ููุณุชุฎุฑุฌ ุงููุต |
| 7 | ุงูุจุญุซ ูู ูุญุชูู OCR | ุงูุจุญุซ ูุฌุฏ ูุตูุต ุฏุงุฎู PDF ููุณูุญ |

## ๐ ููุงุท ุงูุชุญูู

```
โ ุฌุฏูู OCRQueue ููุฌูุฏ ูุฌุงูุฒ
โ ุนููุฏ search_vector ููุฌูุฏ ูู Documents
โ Index GIN ููุดุฃ ุนูู search_vector
โ ุงูุจุญุซ ุงูุจุณูุท ูุนูู (ูุชุงุจุฉ ูููุฉ ูุธููุฑ ุงููุชุงุฆุฌ)
โ ุงูุจุญุซ ุงููุชูุฏู ูุน ููุงุชุฑ ูุนูู
โ ุฑูุน PDF ููุณูุญ ููุถุงู ุชููุงุฆูุงู ููOCRQueue
โ Hangfire Job "process-ocr-queue" ูุนูู ูู 5 ุฏูุงุฆู
โ OCR ูุณุชุฎุฑุฌ ุงููุต ุงูุนุฑุจู ุจูุฌุงุญ (ุงุฎุชุจุงุฑ ุจููู ููุณูุญ)
โ ุงูุจุญุซ ุนู ูููุฉ ููุฌูุฏุฉ ูู PDF ููุณูุญ ูุนุฑุถ ุงูููู
โ ุฅุจุฑุงุฒ ุงููุชุงุฆุฌ (highlighting) ูุนูู
โ ุงูุจุญุซ ูุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
โ ุณุฑุนุฉ ุงูุจุญุซ: ุฃูู ูู 2 ุซุงููุฉ ูู 1000 ูุณุชูุฏ
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 5**

***

# ๐จ ุงููุฑุญูุฉ 5: ุฅุฏุงุฑุฉ ุงูุตุงุฏุฑ ูุงููุงุฑุฏ

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑุงุณูุงุช ุงูุตุงุฏุฑุฉ ูุงููุงุฑุฏุฉ ูุน ุชุฑููู ุชููุงุฆู

## ๐ ุงูููุงู

### 1. ุฅูุดุงุก ุฌุฏุงูู ุงูุตุงุฏุฑ ูุงููุงุฑุฏ

```sql
-- ุฌุฏูู ุงูุตุงุฏุฑ
CREATE TABLE Outgoing (
    outgoing_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id),
    outgoing_number VARCHAR(50) UNIQUE NOT NULL, -- ORG-OUT-2025-0001
    recipient_name VARCHAR(200) NOT NULL,
    recipient_address TEXT,
    subject VARCHAR(500) NOT NULL,
    send_date DATE DEFAULT CURRENT_DATE,
    delivery_method VARCHAR(50), -- ูุฏููุ ุจุฑูุฏุ ุจุฑูุฏ_ุฅููุชุฑูููุ ูุงูุณ
    tracking_number VARCHAR(100),
    notes TEXT,
    created_by INT REFERENCES Users(user_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฌุฏูู ุงููุงุฑุฏ
CREATE TABLE Incoming (
    incoming_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id),
    incoming_number VARCHAR(50) UNIQUE NOT NULL, -- ORG-IN-2025-0001
    sender_name VARCHAR(200) NOT NULL,
    sender_address TEXT,
    subject VARCHAR(500) NOT NULL,
    received_date DATE DEFAULT CURRENT_DATE,
    original_number VARCHAR(100), -- ุฑูู ุงููุฑุณู ุงูุฃุตูู
    priority VARCHAR(20) DEFAULT 'ุนุงุฏู', -- ุนุงุฌูุ ุนุงุฏูุ ุณุฑู
    requires_response BOOLEAN DEFAULT FALSE,
    response_deadline DATE,
    notes TEXT,
    created_by INT REFERENCES Users(user_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Indexes
CREATE INDEX idx_outgoing_number ON Outgoing(outgoing_number);
CREATE INDEX idx_incoming_number ON Incoming(incoming_number);
CREATE INDEX idx_outgoing_date ON Outgoing(send_date);
CREATE INDEX idx_incoming_date ON Incoming(received_date);
```


### 2. ูุธุงู ุงูุชุฑููู ุงูุชููุงุฆู

**ุงูููุท:**

- ุงูุตุงุฏุฑ: `ORG-OUT-2025-0001`
- ุงููุงุฑุฏ: `ORG-IN-2025-0245`

**ุงูููุฏ (Pseudo-code):**

```csharp
public async Task<string> GenerateOutgoingNumber()
{
    var year = DateTime.Now.Year;
    var prefix = $"ORG-OUT-{year}-";
    
    // ุฌูุจ ุขุฎุฑ ุฑูู ูู ูุฐู ุงูุณูุฉ
    var lastNumber = await _db.Outgoing
        .Where(o => o.outgoing_number.StartsWith(prefix))
        .OrderByDescending(o => o.outgoing_id)
        .Select(o => o.outgoing_number)
        .FirstOrDefaultAsync();
    
    int nextNum = 1;
    if (lastNumber != null)
    {
        // ุงุณุชุฎุฑุงุฌ ุงูุฑูู ูู "ORG-OUT-2025-0123"
        var numPart = lastNumber.Split('-').Last();
        nextNum = int.Parse(numPart) + 1;
    }
    
    return $"{prefix}{nextNum:D4}"; // D4 = 4 ุฃุฑูุงู (0001, 0002, ...)
}

// ููุณ ุงูููุทู ูููุงุฑุฏ
public async Task<string> GenerateIncomingNumber()
{
    var year = DateTime.Now.Year;
    var prefix = $"ORG-IN-{year}-";
    
    var lastNumber = await _db.Incoming
        .Where(i => i.incoming_number.StartsWith(prefix))
        .OrderByDescending(i => i.incoming_id)
        .Select(i => i.incoming_number)
        .FirstOrDefaultAsync();
    
    int nextNum = 1;
    if (lastNumber != null)
    {
        var numPart = lastNumber.Split('-').Last();
        nextNum = int.Parse(numPart) + 1;
    }
    
    return $"{prefix}{nextNum:D4}";
}
```


### 3. ุตูุญุฉ ุชุณุฌูู ุตุงุฏุฑ/ูุงุฑุฏ

**ูููุฐุฌ ุงูุตุงุฏุฑ:**

```
ุชุณุฌูู ุตุงุฏุฑ ุฌุฏูุฏ
โโ ุฑูู ุงูุตุงุฏุฑ (ุชููุงุฆูุ ููุนุฑุถ ููุท)
โโ ุงููุณุชูู (ูุต)
โโ ุนููุงู ุงููุณุชูู (ูุต)
โโ ุงูููุถูุน (ูุต)
โโ ุชุงุฑูุฎ ุงูุฅุฑุณุงู (date picker)
โโ ุทุฑููุฉ ุงูุฅุฑุณุงู (dropdown: ูุฏููุ ุจุฑูุฏุ ุฅููุชุฑูููุ ูุงูุณ)
โโ ุฑูู ุงูุชุชุจุน (ูุตุ ุงุฎุชูุงุฑู)
โโ ุงููุฑููุงุช (ุฑูุน ููู + ุฑุจุท ุจูุณุชูุฏ ููุฌูุฏ)
โโ ููุงุญุธุงุช (textarea)
โโ ุฒุฑ "ุญูุธ"
```

**ูููุฐุฌ ุงููุงุฑุฏ:**

```
ุชุณุฌูู ูุงุฑุฏ ุฌุฏูุฏ
โโ ุฑูู ุงููุงุฑุฏ (ุชููุงุฆู)
โโ ุงููุฑุณู (ูุต)
โโ ุนููุงู ุงููุฑุณู (ูุต)
โโ ุงูุฑูู ุงูุฃุตูู (ูุตุ ุฑูู ุงููุฑุณู)
โโ ุงูููุถูุน (ูุต)
โโ ุชุงุฑูุฎ ุงูุงุณุชูุงู (date picker)
โโ ุงูุฃููููุฉ (dropdown: ุนุงุฏูุ ุนุงุฌูุ ุณุฑู)
โโ ูุชุทูุจ ุฑุฏุ (checkbox)
โโ ููุนุฏ ุงูุฑุฏ (date pickerุ ูุธูุฑ ุฅุฐุง ุชู ุชุญุฏูุฏ "ูุชุทูุจ ุฑุฏ")
โโ ุงููุฑููุงุช (ุฑูุน ููู)
โโ ููุงุญุธุงุช (textarea)
โโ ุฒุฑ "ุญูุธ"
```


### 4. ุณุฌูุงุช ุงูุตุงุฏุฑ ูุงููุงุฑุฏ

**ุงูุฌุฏุงูู:**

```
ุณุฌู ุงูุตุงุฏุฑ
โโ ุฃุนูุฏุฉ: ุงูุฑููุ ุงููุณุชููุ ุงูููุถูุนุ ุงูุชุงุฑูุฎุ ุงูุญุงูุฉุ ุงูุฅุฌุฑุงุกุงุช
โโ ููุงุชุฑ: ุงูุณูุฉุ ุทุฑููุฉ ุงูุฅุฑุณุงูุ ุงููุณุชูู
โโ ุชุตุฏูุฑ: Excel, PDF

ุณุฌู ุงููุงุฑุฏ
โโ ุฃุนูุฏุฉ: ุงูุฑููุ ุงููุฑุณูุ ุงูููุถูุนุ ุงูุชุงุฑูุฎุ ุงูุฃููููุฉุ ูุชุทูุจ ุฑุฏุ ุงูุฅุฌุฑุงุกุงุช
โโ ููุงุชุฑ: ุงูุณูุฉุ ุงูุฃููููุฉุ ุงููุฑุณูุ ูุชุทูุจ ุฑุฏ
โโ ุชุตุฏูุฑ: Excel, PDF
```


### 5. ุฑุจุท ุงูุตุงุฏุฑ/ุงููุงุฑุฏ ุจุงููุถุงูุง

**ุฌุฏูู ุฅุถุงูู (ุงุฎุชูุงุฑู):**

```sql
CREATE TABLE Cases (
    case_id SERIAL PRIMARY KEY,
    case_number VARCHAR(50) UNIQUE,
    case_title VARCHAR(200),
    client_name VARCHAR(100),
    case_type VARCHAR(50),
    court_name VARCHAR(100),
    status VARCHAR(20), -- ุฌุงุฑูุฉุ ูุนููุฉุ ูุบููุฉ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฑุจุท ุงูุตุงุฏุฑ ุจุงููุถูุฉ
ALTER TABLE Outgoing ADD COLUMN case_id INT REFERENCES Cases(case_id);

-- ุฑุจุท ุงููุงุฑุฏ ุจุงููุถูุฉ
ALTER TABLE Incoming ADD COLUMN case_id INT REFERENCES Cases(case_id);
```


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุฌุฏูู Outgoing ููุฌูุฏ | ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุงูุฌุฏูู |
| 2 | ุฌุฏูู Incoming ููุฌูุฏ | ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุงูุฌุฏูู |
| 3 | ุชุณุฌูู ุตุงุฏุฑ ูุนูู | ุฅูุดุงุก ุตุงุฏุฑ ููุนุทู ุฑูู ORG-OUT-2025-0001 |
| 4 | ุชุณุฌูู ูุงุฑุฏ ูุนูู | ุฅูุดุงุก ูุงุฑุฏ ููุนุทู ุฑูู ORG-IN-2025-0001 |
| 5 | ุงูุชุฑููู ุงูุชููุงุฆู ูุนูู | ุงูุฑูู ุงูุชุงูู ุฏุงุฆูุงู ูุชุณูุณู |
| 6 | ุณุฌู ุงูุตุงุฏุฑ ูุนูู | ุนุฑุถ ุฌููุน ุงูุณุฌูุงุช ูู ุฌุฏูู |
| 7 | ุณุฌู ุงููุงุฑุฏ ูุนูู | ุนุฑุถ ุฌููุน ุงูุณุฌูุงุช ูุน ุงูููุงุชุฑ |
| 8 | ุฑุจุท ุจุงููุณุชูุฏุงุช | ุงูุตุงุฏุฑ/ุงููุงุฑุฏ ูุฑุชุจุท ุจููู PDF |

## ๐ ููุงุท ุงูุชุญูู

```
โ ุฌุฏูู Outgoing ููุดุฃ ููุญุชูู ุนูู ุฌููุน ุงูุฃุนูุฏุฉ
โ ุฌุฏูู Incoming ููุดุฃ ููุญุชูู ุนูู ุฌููุน ุงูุฃุนูุฏุฉ
โ ุฅูุดุงุก ุตุงุฏุฑ ุฌุฏูุฏ ููุนุทู ุฑูู: ORG-OUT-2025-0001
โ ุฅูุดุงุก ุตุงุฏุฑ ุซุงูู ููุนุทู: ORG-OUT-2025-0002
โ ุฅูุดุงุก ูุงุฑุฏ ุฌุฏูุฏ ููุนุทู: ORG-IN-2025-0001
โ ุงูุชุฑููู ูุนูุฏ ุงูุนุฏ ูุน ุงูุณูุฉ ุงูุฌุฏูุฏุฉ (ุงุฎุชุจุงุฑ ูุฏูู ุจุชุบููุฑ ุงูุณูุฉ)
โ ุฑูุน ูุฑูู ูุน ุงูุตุงุฏุฑ ูุนูู (ุฑุจุท document_id)
โ ุณุฌู ุงูุตุงุฏุฑ ูุนุฑุถ ุฌููุน ุงูุณุฌูุงุช
โ ุณุฌู ุงููุงุฑุฏ ูุนุฑุถ ุฌููุน ุงูุณุฌูุงุช
โ ููุงุชุฑ ุงูุณูุฉ ูุงูุฃููููุฉ ุชุนูู
โ ุชุตุฏูุฑ ุฅูู Excel ูุนูู (ุงุฎุชูุงุฑู)
โ ุนูุงูุฉ "ูุชุทูุจ ุฑุฏ" ุชูุจุฑุฒ ุงูุณุฌูุงุช ุงูุนุงุฌูุฉ
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 6**

***

# โ ุงููุฑุญูุฉ 6: ุฅุณูุงุฏ ุงูููุงู

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุฅุณูุงุฏ ุงูููุงู ูุชุชุจุน ุงูุชูุฏู

## ๐ ุงูููุงู

### 1. ุฅูุดุงุก ุฌุฏูู ุงูููุงู

```sql
CREATE TABLE Tasks (
    task_id SERIAL PRIMARY KEY,
    task_title VARCHAR(200) NOT NULL,
    task_description TEXT,
    assigned_to INT REFERENCES Users(user_id) NOT NULL,
    assigned_by INT REFERENCES Users(user_id) NOT NULL,
    document_id INT REFERENCES Documents(document_id), -- ุฑุจุท ุจูุณุชูุฏ (ุงุฎุชูุงุฑู)
    case_id INT REFERENCES Cases(case_id), -- ุฑุจุท ุจูุถูุฉ (ุงุฎุชูุงุฑู)
    priority VARCHAR(20) DEFAULT 'ุนุงุฏู', -- ุนุงุฌูุ ุนุงุฏูุ ููุฎูุถ
    status VARCHAR(20) DEFAULT 'pending', -- pending, in_progress, completed, cancelled
    due_date DATE,
    completed_at TIMESTAMP,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฌุฏูู ุชุนูููุงุช ุงูููุงู
CREATE TABLE TaskComments (
    comment_id SERIAL PRIMARY KEY,
    task_id INT REFERENCES Tasks(task_id) ON DELETE CASCADE,
    user_id INT REFERENCES Users(user_id),
    comment_text TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Indexes
CREATE INDEX idx_tasks_assigned_to ON Tasks(assigned_to);
CREATE INDEX idx_tasks_status ON Tasks(status);
CREATE INDEX idx_tasks_due_date ON Tasks(due_date);
```


### 2. ุตูุญุฉ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ

**ุงููููุฐุฌ:**

```
ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ
โโ ุนููุงู ุงููููุฉ (ูุต ูุตูุฑุ ุฅูุฒุงูู)
โโ ุงููุตู (textarea)
โโ ุฅุณูุงุฏ ุฅูู (dropdown ุงููุณุชุฎุฏููู)
โโ ุงูุฃููููุฉ (dropdown: ุนุงุฌูุ ุนุงุฏูุ ููุฎูุถ)
โโ ุงูููุนุฏ ุงูููุงุฆู (date picker)
โโ ุฑุจุท ุจูุณุชูุฏ (ุงุฎุชูุงุฑูุ ุจุญุซ ุนู ูุณุชูุฏ)
โโ ุฑุจุท ุจูุถูุฉ (ุงุฎุชูุงุฑูุ dropdown ุงููุถุงูุง)
โโ ุฒุฑ "ุฅูุดุงุก ุงููููุฉ"
```


### 3. ุตูุญุฉ ุงูููุงู (Dashboard)

**ุงูุฃูุณุงู:**

```
ููุญุฉ ุงูููุงู
โโ ููุงูู (ุงูุชุจููุจ ุงูุงูุชุฑุงุถู)
โ   โโ ูุนููุฉ (Pending) - 5 ููุงู
โ   โโ ููุฏ ุงูุชูููุฐ (In Progress) - 2
โ   โโ ููุชููุฉ (Completed) - 18
โ
โโ ุงูููุงู ุงูุชู ุฃุณูุฏุชูุง (ูููุฏูุฑูู)
โ   โโ ุฌููุน ุงูููุงู ุงููุณูุฏุฉ ูู ูุฐุง ุงููุณุชุฎุฏู
โ
โโ ุฌููุน ุงูููุงู (ูููุฏูุฑ ููุท)
    โโ ุฌููุน ููุงู ุงููุฑูู
```


### 4. ุจุทุงูุฉ ุงููููุฉ

**ุนุฑุถ ุจุทุงูุฉ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ด ุนุงุฌู] ุตูุงุบุฉ ูุฐูุฑุฉ ุฑุฏ            โ
โ                                       โ
โ ๐ค ุฃุญูุฏ ุณุงูู                         โ
โ ๐ ุงูููุนุฏ: 2025-11-25                โ
โ ๐ ูุฑุชุจุท ุจู: ูุถูุฉ ุฑูู 132            โ
โ                                       โ
โ ุงูุญุงูุฉ: [โผ ููุฏ ุงูุชูููุฐ]              โ
โ                                       โ
โ [๐ฌ 3 ุชุนูููุงุช] [๐๏ธ ุนุฑุถ ุงูุชูุงุตูู]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```


### 5. ุตูุญุฉ ุชูุงุตูู ุงููููุฉ

**ุงูุฃูุณุงู:**

```
ุชูุงุตูู ุงููููุฉ
โโ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
โ   โโ ุงูุนููุงู (ูุงุจู ููุชุนุฏูู)
โ   โโ ุงููุตู (ูุงุจู ููุชุนุฏูู)
โ   โโ ุงูุญุงูุฉ (dropdown: ูุนููุ ููุฏ ุงูุชูููุฐุ ููุชูู)
โ   โโ ุงูุฃููููุฉ
โ   โโ ุงูููุนุฏ ุงูููุงุฆู
โ
โโ ุงููุณุชูุฏ ุงููุฑุชุจุท
โ   โโ ุฑุงุจุท ูุจุงุดุฑ ูููุณุชูุฏ (ุฅู ูุฌุฏ)
โ
โโ ุณุฌู ุงูุชุนูููุงุช
โ   โโ ุนุฑุถ ุฌููุน ุงูุชุนูููุงุช (ูุฑุชุจุฉ ุญุณุจ ุงูููุช)
โ   โโ ูููุฐุฌ ุฅุถุงูุฉ ุชุนููู ุฌุฏูุฏ
โ
โโ ุณุฌู ุงููุดุงุท
    โโ ุฃูุดุฃูุง ุฃุญูุฏ ูู 2025-11-20
    โโ ุนุฏูููุง ูุญูุฏ ูู 2025-11-21
    โโ ุฃููููุง ุฃุญูุฏ ูู 2025-11-22
```


### 6. ุงูุฅุดุนุงุฑุงุช ุงูุชููุงุฆูุฉ

**ุงูุฃุญุฏุงุซ:**

1. **ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ**
    - ุฅุดุนุงุฑ ูููุณุชุฎุฏู ุงูููุณูุฏ ุฅููู
    - "ุชู ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ ุฅููู: [ุนููุงู ุงููููุฉ]"
2. **ุงูุชุฑุงุจ ุงูููุนุฏ ุงูููุงุฆู**
    - ูุจู ููู ูุงุญุฏ ูู due_date
    - "ุชุฐููุฑ: ูููุฉ [ุนููุงู] ุชูุชูู ุบุฏุงู"
3. **ุชุฌุงูุฒ ุงูููุนุฏ**
    - ุจุนุฏ due_date
    - "โ๏ธ ุชุฃุฎุฑุช ุนู ูููุฉ: [ุนููุงู]"
4. **ุฅุถุงูุฉ ุชุนููู**
    - ุฅุดุนุงุฑ ูู assigned_to ู assigned_by
    - "ุชุนููู ุฌุฏูุฏ ุนูู ูููุฉ: [ุนููุงู]"
5. **ุชุบููุฑ ุงูุญุงูุฉ**
    - ุนูุฏ ุชุญุฏูุซ status
    - "ุชู ุชุญุฏูุซ ุญุงูุฉ ุงููููุฉ [ุนููุงู] ุฅูู: ููุชูู"

**ุงูุชูููุฐ (Pseudo-code):**

```csharp
public async Task CreateTask(Task task)
{
    await _db.Tasks.AddAsync(task);
    await _db.SaveChangesAsync();
    
    // ุฅูุดุงุก ุฅุดุนุงุฑ
    await _db.Notifications.AddAsync(new Notification
    {
        user_id = task.assigned_to,
        title = "ูููุฉ ุฌุฏูุฏุฉ",
        message = $"ุชู ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ ุฅููู: {task.task_title}",
        link = $"/tasks/{task.task_id}",
        is_read = false
    });
    
    await _db.SaveChangesAsync();
}

// Worker ููุชุฐููุฑุงุช
[AutomaticRetry(Attempts = 0)]
public async Task SendTaskReminders()
{
    var tomorrow = DateTime.Today.AddDays(1);
    
    var dueTasks = await _db.Tasks
        .Where(t => t.status != "completed" && t.due_date == tomorrow)
        .ToListAsync();
    
    foreach (var task in dueTasks)
    {
        await _db.Notifications.AddAsync(new Notification
        {
            user_id = task.assigned_to,
            title = "ุชุฐููุฑ ุจูููุฉ",
            message = $"ูููุฉ '{task.task_title}' ุชูุชูู ุบุฏุงู",
            link = $"/tasks/{task.task_id}"
        });
    }
    
    await _db.SaveChangesAsync();
}

// ุชุณุฌูู ูู Hangfire
RecurringJob.AddOrUpdate(
    "send-task-reminders",
    () => SendTaskReminders(),
    Cron.Daily(9) // ูู ููู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู
);
```


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุฌุฏูู Tasks ููุฌูุฏ | ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุงูุฌุฏูู |
| 2 | ุฌุฏูู TaskComments ููุฌูุฏ | ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุงูุฌุฏูู |
| 3 | ุฅูุดุงุก ูููุฉ ูุนูู | ูููุฉ ุฌุฏูุฏุฉ ุชูุถุงู ูููุงุฆูุฉ |
| 4 | ุตูุญุฉ ุงูููุงู ุชุนูู | ุนุฑุถ ููุงู ุงููุณุชุฎุฏู ููุณูุฉ ุญุณุจ ุงูุญุงูุฉ |
| 5 | ุชูุงุตูู ุงููููุฉ ุชุนูู | ุนุฑุถ ุฌููุน ูุนูููุงุช ุงููููุฉ |
| 6 | ุฅุถุงูุฉ ุชุนููู ูุนูู | ุงูุชุนูููุงุช ุชูุถุงู ูุชุธูุฑ |
| 7 | ุชุบููุฑ ุงูุญุงูุฉ ูุนูู | ุชุญุฏูุซ ุงูุญุงูุฉ ูููู ุงููููุฉ ูููุณู ุงูุตุญูุญ |
| 8 | ุงูุฅุดุนุงุฑุงุช ุชุนูู | ุฅุดุนุงุฑ ุนูุฏ ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ |

## ๐ ููุงุท ุงูุชุญูู

```
โ ุฌุฏูู Tasks ููุดุฃ ุจุฌููุน ุงูุฃุนูุฏุฉ
โ ุฌุฏูู TaskComments ููุดุฃ
โ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ ูุนูู ูุงููููุฉ ุชูุญูุธ
โ ุงููุณุชุฎุฏู ุงูููุณูุฏ ุฅููู ูุฑู ุงููููุฉ ูู ุตูุญุฉ "ููุงูู"
โ ุชุตููุฉ ุงูููุงู ุญุณุจ ุงูุญุงูุฉ (Pending/In Progress/Completed) ูุนูู
โ ุตูุญุฉ ุชูุงุตูู ุงููููุฉ ุชุนุฑุถ ุฌููุน ุงููุนูููุงุช
โ ุฅุถุงูุฉ ุชุนููู ุนูู ูููุฉ ูุนูู
โ ุชุนุฏูู ุญุงูุฉ ุงููููุฉ (ูู Pending โ In Progress) ูุนูู
โ ุฅุชูุงู ูููุฉ (Completed) ููุณุฌู completed_at
โ ุฑุจุท ูููุฉ ุจูุณุชูุฏ ูุนูู (ุฑุงุจุท ุงููุณุชูุฏ ูุธูุฑ)
โ ุฅุดุนุงุฑ ุนูุฏ ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ ูุธูุฑ ูููุณุชุฎุฏู
โ Hangfire Job "send-task-reminders" ููุณุฌู ููุนูู ููููุงู
โ ุชุฐููุฑ ุจูููุฉ ุชูุชูู ุบุฏุงู ููุฑุณู (ุงุฎุชุจุงุฑ ูุฏูู)
โ ุงูููุงู ุงููุชุฃุฎุฑุฉ ุชุธูุฑ ุจููู ูููุฒ (ุฃุญูุฑ)
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 7**

***

# ๐ง ุงููุฑุญูุฉ 7: ุงูุชูุงูู ูุน ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

## ๐ฏ ุงููุฏู

ุจูุงุก ูุธุงู ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุดุงุฑูุฉ ุงููุณุชูุฏุงุช ุนุจุฑ ุฑูุงุจุท ุขููุฉ

## ๐ ุงูููุงู

### 1. ุฅุนุฏุงุฏ ุฅุนุฏุงุฏุงุช SMTP

**ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช:**

```sql
INSERT INTO Settings (setting_key, setting_value, description) VALUES
('smtp_host', 'smtp.gmail.com', 'SMTP Server'),
('smtp_port', '587', 'SMTP Port'),
('smtp_username', 'your-email@gmail.com', 'SMTP Username'),
('smtp_password', 'encrypted_password', 'SMTP Password (encrypted)'),
('smtp_use_ssl', 'true', 'Use SSL/TLS'),
('email_from_name', 'ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช', 'Sender Name'),
('email_from_address', 'noreply@lawfirm.com', 'Sender Email');
```

**ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ (ูููุฏูุฑ):**

```
ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โโ SMTP Host (ูุต)
โโ SMTP Port (ุฑูู)
โโ ุงุณู ุงููุณุชุฎุฏู (ูุต)
โโ ูููุฉ ุงููุฑูุฑ (password)
โโ ุงุณุชุฎุฏุงู SSL (checkbox)
โโ ุงุณู ุงููุฑุณู (ูุต)
โโ ุจุฑูุฏ ุงููุฑุณู (ูุต)
โโ [ุฒุฑ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู] [ุฒุฑ ุญูุธ]
```


### 2. ุจูุงุก ุฎุฏูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

**ุงูููุฏ (Pseudo-code):**

```csharp
public class EmailService
{
    private readonly IConfiguration _config;
    
    public async Task<bool> SendEmailAsync(string to, string subject, string body, 
                                            List<string> attachments = null)
    {
        try
        {
            var message = new MimeMessage();
            message.From.Add(new MailboxAddress(
                _config["smtp_from_name"], 
                _config["smtp_from_address"]
            ));
            message.To.Add(MailboxAddress.Parse(to));
            message.Subject = subject;
            
            var builder = new BodyBuilder { HtmlBody = body };
            
            // ุฅุถุงูุฉ ุงููุฑููุงุช
            if (attachments != null)
            {
                foreach (var filePath in attachments)
                {
                    builder.Attachments.Add(filePath);
                }
            }
            
            message.Body = builder.ToMessageBody();
            
            using var client = new SmtpClient();
            await client.ConnectAsync(
                _config["smtp_host"], 
                int.Parse(_config["smtp_port"]), 
                bool.Parse(_config["smtp_use_ssl"])
            );
            
            await client.AuthenticateAsync(
                _config["smtp_username"], 
                _config["smtp_password"]
            );
            
            await client.SendAsync(message);
            await client.DisconnectAsync(true);
            
            return true;
        }
        catch (Exception ex)
        {
            // ุชุณุฌูู ุงูุฎุทุฃ
            return false;
        }
    }
}
```


### 3. ุฅุฑุณุงู ุงููุณุชูุฏุงุช ุนุจุฑ ุงูุจุฑูุฏ

**ุตูุญุฉ ุฅุฑุณุงู:**

```
ุฅุฑุณุงู ูุณุชูุฏ ุนุจุฑ ุงูุจุฑูุฏ
โโ ุงููุณุชูุฏ ุงููุญุฏุฏ: [ุนูุฏ-ุจูุน-132.pdf]
โโ ุฅูู (ุจุฑูุฏ ุงููุณุชูู)
โโ ูุณุฎุฉ ุฅูู (CC) - ุงุฎุชูุงุฑู
โโ ุงูููุถูุน
โโ ูุต ุงูุฑุณุงูุฉ (rich text editor)
โโ ุฅุฑูุงู ุงูููู ุงูุฃุตูู (checkboxุ ุงูุชุฑุงุถู: โ)
โโ [ุฒุฑ ุฅุฑุณุงู]
```

**ุงูุณุฌู:**

```sql
CREATE TABLE EmailLog (
    email_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id),
    sent_to VARCHAR(200) NOT NULL,
    subject VARCHAR(500),
    body TEXT,
    sent_by INT REFERENCES Users(user_id),
    sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) DEFAULT 'sent', -- sent, failed
    error_message TEXT
);
```


### 4. ูุดุงุฑูุฉ ุงููุณุชูุฏุงุช ุนุจุฑ ุฑูุงุจุท ุขููุฉ

**ุงููุจุฏุฃ:**

- ุฅูุดุงุก ุฑุงุจุท ูุฑูุฏ ููู ูุณุชูุฏ
- ุงูุฑุงุจุท ุตุงูุญ ููุฏุฉ ูุญุฏุฏุฉ (ูุซูุงู 7 ุฃูุงู)
- ูููู ุชุญุฏูุฏ ุนุฏุฏ ูุฑุงุช ุงููุชุญ (ูุซูุงู 5 ูุฑุงุช ููุท)
- ูุง ูุญุชุงุฌ ุงููุณุชูู ูุชุณุฌูู ุฏุฎูู

**ุงูุฌุฏูู:**

```sql
CREATE TABLE SharedLinks (
    link_id SERIAL PRIMARY KEY,
    document_id INT REFERENCES Documents(document_id) ON DELETE CASCADE,
    link_token VARCHAR(100) UNIQUE NOT NULL, -- ุฑูุฒ ุนุดูุงุฆู (GUID)
    created_by INT REFERENCES Users(user_id),
    expires_at TIMESTAMP NOT NULL,
    max_access_count INT DEFAULT NULL, -- NULL = ุบูุฑ ูุญุฏูุฏ
    current_access_count INT DEFAULT 0,
    password VARCHAR(255), -- ูููุฉ ูุฑูุฑ ุงุฎุชูุงุฑูุฉ (ูุดูุฑุฉ)
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุณุฌู ุงููุตูู
CREATE TABLE LinkAccessLog (
    access_id SERIAL PRIMARY KEY,
    link_id INT REFERENCES SharedLinks(link_id) ON DELETE CASCADE,
    accessed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ip_address VARCHAR(45),
    user_agent TEXT
);
```

**ุงูููุฏ (Pseudo-code):**

```csharp
public async Task<string> CreateSharedLink(int documentId, int daysValid, 
                                            int? maxAccess = null, string password = null)
{
    var token = Guid.NewGuid().ToString("N"); // ุฑูุฒ ุนุดูุงุฆู ุจุฏูู ุดุฑุทุงุช
    
    var link = new SharedLink
    {
        document_id = documentId,
        link_token = token,
        created_by = GetCurrentUserId(),
        expires_at = DateTime.Now.AddDays(daysValid),
        max_access_count = maxAccess,
        password = password != null ? BCrypt.HashPassword(password) : null
    };
    
    await _db.SharedLinks.AddAsync(link);
    await _db.SaveChangesAsync();
    
    // ุฅุฑุฌุงุน ุงูุฑุงุจุท ุงููุงูู
    return $"https://yourdomain.com/shared/{token}";
}

// ุตูุญุฉ ุงููุตูู ููุฑุงุจุท ุงููุดุชุฑู
[HttpGet("/shared/{token}")]
public async Task<IActionResult> AccessSharedDocument(string token, string password = null)
{
    var link = await _db.SharedLinks
        .Include(l => l.Document)
        .FirstOrDefaultAsync(l => l.link_token == token && l.is_active);
    
    if (link == null)
        return NotFound("ุงูุฑุงุจุท ุบูุฑ ููุฌูุฏ");
    
    // ุงูุชุญูู ูู ุงูุตูุงุญูุฉ
    if (link.expires_at < DateTime.Now)
        return BadRequest("ุงูุฑุงุจุท ููุชูู ุงูุตูุงุญูุฉ");
    
    // ุงูุชุญูู ูู ุนุฏุฏ ุงููุฑุงุช
    if (link.max_access_count != null && 
        link.current_access_count >= link.max_access_count)
        return BadRequest("ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงููุฑุงุช");
    
    // ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
    if (link.password != null)
    {
        if (password == null || !BCrypt.Verify(password, link.password))
            return BadRequest("ูููุฉ ูุฑูุฑ ุฎุงุทุฆุฉ");
    }
    
    // ุฒูุงุฏุฉ ุงูุนุฏุงุฏ
    link.current_access_count++;
    await _db.SaveChangesAsync();
    
    // ุชุณุฌูู ุงููุตูู
    await _db.LinkAccessLog.AddAsync(new LinkAccessLog
    {
        link_id = link.link_id,
        ip_address = HttpContext.Connection.RemoteIpAddress.ToString(),
        user_agent = Request.Headers["User-Agent"]
    });
    await _db.SaveChangesAsync();
    
    // ุฅุฑุฌุงุน ุงูููู
    return File(link.Document.file_path, link.Document.mime_type, 
                link.Document.document_name);
}
```


### 5. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฑูุงุจุท ุงููุดุชุฑูุฉ

**ุนุฑุถ ุงูุฑูุงุจุท:**

```
ุงูุฑูุงุจุท ุงููุดุชุฑูุฉ
โโ ุฌุฏูู ุงูุฑูุงุจุท
โ   โโ ุงููุณุชูุฏ
โ   โโ ุงูุฑุงุจุท (ูุน ุฒุฑ ูุณุฎ)
โ   โโ ุชุงุฑูุฎ ุงูุงูุชูุงุก
โ   โโ ุนุฏุฏ ุงููุฑุงุช (3/5)
โ   โโ ุงูุญุงูุฉ (ูุดุท/ููุชูู)
โ   โโ ุงูุฅุฌุฑุงุกุงุช (ุชุนุทููุ ุญุฐูุ ุณุฌู ุงููุตูู)
โ
โโ [ุฒุฑ ุฅูุดุงุก ุฑุงุจุท ุฌุฏูุฏ]
```


## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุฅุนุฏุงุฏุงุช SMTP ุชุนูู | ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ููุฌุญ |
| 2 | ุฅุฑุณุงู ุจุฑูุฏ ูุนูู | ุฅุฑุณุงู ุจุฑูุฏ ุชุฌุฑูุจู ูุตู |
| 3 | ุฅุฑูุงู ูุณุชูุฏ ูุนูู | ุงูุจุฑูุฏ ูุญุชูู ุนูู ุงููุฑูู |
| 4 | ุฌุฏูู EmailLog ูุนูู | ุงูุณุฌู ููุณุฌู ุงูุจุฑูุฏ ุงููุฑุณู |
| 5 | ุฅูุดุงุก ุฑุงุจุท ูุดุชุฑู ูุนูู | ุฑุงุจุท ุฌุฏูุฏ ูููุดุฃ ููุนูู |
| 6 | ุงูุฑุงุจุท ุงููุดุชุฑู ูุนูู | ูุชุญ ุงูุฑุงุจุท ููุญููู ุงูููู |
| 7 | ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑุงุจุท | ุจุนุฏ ุงููุฏุฉ ุงููุญุฏุฏุฉุ ุงูุฑุงุจุท ูุง ูุนูู |
| 8 | ุณุฌู ุงููุตูู ูุนูู | LinkAccessLog ููุณุฌู ูู ูุตูู |

## ๐ ููุงุท ุงูุชุญูู

```
โ ุฌุฏูู EmailLog ููุฌูุฏ
โ ุฌุฏูู SharedLinks ููุฌูุฏ
โ ุฌุฏูู LinkAccessLog ููุฌูุฏ
โ ุฅุนุฏุงุฏุงุช SMTP ูุญููุธุฉ ูู Settings
โ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุชุนูู (ูููุฏูุฑ)
โ ุฒุฑ "ุงุฎุชุจุงุฑ ุงูุงุชุตุงู" ูุฑุณู ุจุฑูุฏ ุชุฌุฑูุจู ุจูุฌุงุญ
โ ุฅุฑุณุงู ูุณุชูุฏ ุนุจุฑ ุงูุจุฑูุฏ ูุนูู (ุงูุจุฑูุฏ ูุตู ูุน ุงููุฑูู)
โ EmailLog ูุณุฌู ุงูุจุฑูุฏ ุงููุฑุณู ูุน ุงูุญุงูุฉ (sent/failed)
โ ุฅูุดุงุก ุฑุงุจุท ูุดุชุฑู ููุนุทู ุฑุงุจุท ูุฑูุฏ (GUID)
โ ูุชุญ ุงูุฑุงุจุท ุงููุดุชุฑู ูู ูุชุตูุญ ุขุฎุฑ (ุจุฏูู ุชุณุฌูู ุฏุฎูู) ููุญููู ุงูููู
โ ุฑุงุจุท ูุญูู ุจูููุฉ ูุฑูุฑ ูุทูุจ ูููุฉ ุงููุฑูุฑ
โ ุงูุฑุงุจุท ุงูููุชูู ุงูุตูุงุญูุฉ ูุธูุฑ ุฑุณุงูุฉ "ููุชูู"
โ ุงูุฑุงุจุท ุงููุญุฏูุฏ (5 ูุฑุงุช) ูุชููู ุจุนุฏ ุงููุฑุฉ ุงูุฎุงูุณุฉ
โ LinkAccessLog ูุณุฌู ูู ูุตูู (IP, User-Agent, ููุช)
โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฑูุงุจุท ุชุนุฑุถ ุฌููุน ุงูุฑูุงุจุท ุงููููุดุฃุฉ
โ ุฒุฑ "ูุณุฎ ุงูุฑุงุจุท" ูุนูู (copy to clipboard)
โ ุชุนุทูู ุฑุงุจุท (is_active = false) ูููุน ุงููุตูู
```

**โญ๏ธ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงูุชูู ูููุฑุญูุฉ 8**

***

# ๐งช ุงููุฑุญูุฉ 8: ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ูุงูุชูุซูู

## ๐ฏ ุงููุฏู

ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ููุชุงุจุฉ ุงููุซุงุฆู ุงูููุงุฆูุฉ

## ๐ ุงูููุงู

### 1. ุงูุงุฎุชุจุงุฑ ุงููุธููู (Functional Testing)

**ุณููุงุฑูู 1: ุฏูุฑุฉ ุญูุงุฉ ูุณุชูุฏ ูุงููุฉ**

```
ุงูุฎุทูุงุช:
1. ุชุณุฌูู ุฏุฎูู ูู "ูุญุงูู ุฑุฆูุณู"
2. ุฑูุน ููู PDF ุจุงุณู "ุนูุฏ-ุจูุน-ุนูุงุฑู.pdf"
3. ุชุตูููู: ููุน=ุนูุฏุ ูุถูุฉ=132ุ ูุณูู=[ุนูุงุฑูุ ุจูุน]
4. ููู ุงูููู (Check-out)
5. ุฑูุน ูุณุฎุฉ ูุนุฏูุฉ (Check-in โ v1.1)
6. ุฅูุดุงุก ูููุฉ: "ูุฑุงุฌุนุฉ ุงูุนูุฏ" ูุฅุณูุงุฏูุง ูู"ูุญุงูู ูุณุงุนุฏ"
7. ุฅุฑุณุงู ุงููุณุชูุฏ ุนุจุฑ ุงูุจุฑูุฏ ูู client@example.com
8. ุฅูุดุงุก ุฑุงุจุท ูุดุชุฑู ุตุงูุญ 7 ุฃูุงู
9. ูุชุญ ุงูุฑุงุจุท ูู ูุชุตูุญ ุขุฎุฑ ูุงูุชุญูู ูู ุงููุตูู
10. ุชุณุฌูู ุงููุณุชูุฏ ูู"ุตุงุฏุฑ" ุจุฑูู ORG-OUT-2025-0001

ุงูุชุญูู:
โ ุงูููู ููุฌูุฏ ูู NAS
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุงูุณุฌู
โ ุงูุฅุตุฏุงุฑ v1.1 ููุฌูุฏ ูู DocumentVersions
โ ุงููููุฉ ุธูุฑุช ูููุญุงูู ุงููุณุงุนุฏ
โ ุงูุจุฑูุฏ ูุตู ูุน ุงููุฑูู
โ ุงูุฑุงุจุท ุงููุดุชุฑู ูุนูู
โ ุณุฌู ุงูุตุงุฏุฑ ูุญุชูู ุนูู ุงูุณุฌู
โ AuditLog ูุญุชูู ุนูู ุฌููุน ุงูุฅุฌุฑุงุกุงุช (upload, check_out, check_in, assign_task, send_email, create_link, register_outgoing)
```

**ุณููุงุฑูู 2: Version Control ูุงูู**

```
1. ุฑูุน ููู Word "ูุฐูุฑุฉ-ุฏูุงุน.docx"
2. ููู ุงูููู
3. ุฑูุน ูุณุฎุฉ ูุนุฏูุฉ (v1.1)
4. ุฑูุน ูุณุฎุฉ ุซุงููุฉ (v1.2)
5. ุฑูุน ูุณุฎุฉ ุซุงูุซุฉ (v2.0 - ููุงุฆูุฉ)
6. ุงุณุชุฑุฌุงุน v1.1 (ููุดุฆ v2.1)
7. ููุงุฑูุฉ v1.1 ู v2.0
8. ุชุญููู v1.0 ุงูุฃุตูู

ุงูุชุญูู:
โ 5 ุฅุตุฏุงุฑุงุช ููุฌูุฏุฉ ูู DocumentVersions
โ current_version = 2.1
โ v2.0 ููุนููู ูู is_final
โ ุงูููุงุฑูุฉ ุชูุธูุฑ ุงููุฑููุงุช
โ ุชุญููู v1.0 ููุญููู ุงูููู ุงูุตุญูุญ
```

**ุณููุงุฑูู 3: ุงูุจุญุซ ูู ูุณุชูุฏุงุช ููุณูุญุฉ**

```
1. ุฑูุน PDF ููุณูุญ (ุตูุฑุฉ ูุตูุฉ)
2. ุงูุงูุชุธุงุฑ 5 ุฏูุงุฆู (OCR Worker)
3. ุงูุจุญุซ ุนู ูููุฉ ููุฌูุฏุฉ ูู ุงูุตูุฑุฉ
4. ุงูุชุญูู ูู ุธููุฑ ุงููุณุชูุฏ ูู ุงููุชุงุฆุฌ

ุงูุชุญูู:
โ OCRQueue ุชุญุชูู ุนูู ุงูุณุฌู ุจุญุงูุฉ "completed"
โ metadata->>'ocr_text' ูุญุชูู ุนูู ุงููุต ุงููุณุชุฎุฑุฌ
โ ุงูุจุญุซ ุนู ุงููููุฉ ูุนุฑุถ ุงููุณุชูุฏ
โ ุงููุต ููุจุฑุฒ ูู ุตูุญุฉ ุงููุชุงุฆุฌ
```


### 2. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

**ุงูุฃุฏูุงุช ุงููุทููุจุฉ:**


| ุงูุฃุฏุงุฉ | ุงูุงุณุชุฎุฏุงู | ุงูุชุซุจูุช |
| :-- | :-- | :-- |
| **Apache JMeter** | ุงุฎุชุจุงุฑ ุญูู HTTP ุดุงูู (ููุตู ุจู) | [ุชุญููู JMeter](https://jmeter.apache.org/download_jmeter.cgi) |
| **k6** | ุณูุฑูุจุชุงุช ุจุณูุทุฉ ุจูุบุฉ JavaScript | `choco install k6` (Windows) ุฃู `brew install k6` (Mac) |


***

#### **ูุซุงู ุนููู: ุงุฎุชุจุงุฑ ุฑูุน ุงููููุงุช ุจุงุณุชุฎุฏุงู k6**

**ุงูููู: test-upload.js**

```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  vus: 10,        // 10 ูุณุชุฎุฏููู ูุชุฒุงูููู
  duration: '30s', // ูุฏุฉ ุงูุงุฎุชุจุงุฑ
};

export default function () {
  // ุฅูุดุงุก ููู PDF ูููู
  const file = open('test-sample.pdf', 'b');
  
  const formData = {
    file: http.file(file, 'test-sample.pdf', 'application/pdf'),
    folder_id: '1',
    document_type: 'ุนูุฏ',
  };
  
  const response = http.post('http://localhost:5000/api/documents/upload', formData);
  
  check(response, {
    'ุงูุญุงูุฉ 200': (r) => r.status === 200,
    'ููุช ุงูุฑูุน < 5 ุซูุงูู': (r) => r.timings.duration < 5000,
  });
  
  sleep(1);
}
```

**ุชุดุบูู ุงูุงุฎุชุจุงุฑ:**

```
k6 run test-upload.js
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**

```
checks.........................: 100.00% โ 300  โ 0
http_req_duration..............: avg=2.1s  min=1.8s  max=4.5s
```

**ูุนุงููุฑ ุงููุฌุงุญ ุงููุทููุจุฉ:**


| ุงูุงุฎุชุจุงุฑ | ุงููุนูุงุฑ | ุงูุฃุฏุงุฉ |
| :-- | :-- | :-- |
| ุฑูุน 50 ููู ุฏูุนุฉ ูุงุญุฏุฉ | < 5 ุซูุงูู (ูุชูุณุท 100ms/ููู) | k6 |
| ุงูุจุญุซ ูู 1000 ูุณุชูุฏ | < 2 ุซุงููุฉ | JMeter |
| ูุชุญ ุตูุญุฉ Dashboard | < 1 ุซุงููุฉ | JMeter |
| OCR ูููู 10 ุตูุญุงุช | < 30 ุซุงููุฉ | ูุฏูู + Stopwatch |

**ููุงุท ุชุญูู ุฅุถุงููุฉ:**

```
โ ุชู ุชุซุจูุช k6 ุฃู JMeter ุจูุฌุงุญ
โ ุชู ูุชุงุจุฉ 3 ุณูุฑูุจุชุงุช ุงุฎุชุจุงุฑ ุนูู ุงูุฃูู (ุฑูุนุ ุจุญุซุ Dashboard)
โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงุฌุชุงุฒุช ุงููุนุงููุฑ ุงููุญุฏุฏุฉ
โ ุชู ุชูุซูู ุงููุชุงุฆุฌ ูู ููู PERFORMANCE_TEST_RESULTS.md ูุน ููุทุงุช ุดุงุดุฉ
โ ุชู ุชุญุฏูุฏ ุฃู ุงุฎุชูุงูุงุช (bottlenecks) ูุญููุง
```


### 3. ุงุฎุชุจุงุฑ ุงูุฃูุงู (Security Testing)

**ุงูุงุฎุชุจุงุฑุงุช:**

```
โ ูุญุงููุฉ ุงููุตูู ูุตูุญุฉ ูุญููุฉ ุจุฏูู ุชุณุฌูู ุฏุฎูู (ูุฌุจ ุฅุนุงุฏุฉ ุงูุชูุฌูู ูุตูุญุฉ Login)
โ ูุญุงููุฉ ุญุฐู ูุณุชูุฏ ูู ูุณุชุฎุฏู ุนุงุฏู (ูุฌุจ ุฑูุถ ุงูุทูุจ)
โ ูุญุงููุฉ ุชุฎููู ุฑุงุจุท ูุดุชุฑู ุนุดูุงุฆู (ูุฌุจ ูุดู ุงููุตูู)
โ ูุญุงููุฉ SQL Injection ูู ุงูุจุญุซ (ูุฌุจ ุนุฏู ุงูุชุฃุซูุฑ)
โ ูุญุงููุฉ ุฑูุน ููู ุถุงุฑ (.exe, .bat) (ูุฌุจ ุฑูุถู)
โ ุงูุชุญูู ูู ุชุดููุฑ ูููุงุช ุงููุฑูุฑ (BCrypt)
โ ุงูุชุญูู ูู HTTPS (ูู ุงูุฅูุชุงุฌ)
โ ุงุฎุชุจุงุฑ CSRF Token ูู ุงูููุงุฐุฌ
```


### 4. ูุชุงุจุฉ ุงููุซุงุฆู

**ุงููููุงุช ุงููุทููุจุฉ:**

**ุฃ) ุฏููู ุงููุณุชุฎุฏู (User Manual)**

```markdown
# ุฏููู ุงุณุชุฎุฏุงู ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงููุงููููุฉ

## 1. ุงูุจุฏุก
### 1.1 ุชุณุฌูู ุงูุฏุฎูู
### 1.2 ุตูุญุฉ Dashboard

## 2. ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช
### 2.1 ุฑูุน ูุณุชูุฏ ุฌุฏูุฏ
### 2.2 ุชุตูุญ ุงููุณุชูุฏุงุช
### 2.3 ุงูุจุญุซ ุนู ูุณุชูุฏ
### 2.4 ุชุญููู ูุณุชูุฏ

## 3. Version Control
### 3.1 ููู ููู (Check-out)
### 3.2 ุฑูุน ุฅุตุฏุงุฑ ุฌุฏูุฏ (Check-in)
### 3.3 ุนุฑุถ ุณุฌู ุงูุฅุตุฏุงุฑุงุช
### 3.4 ุงุณุชุฑุฌุงุน ุฅุตุฏุงุฑ ุณุงุจู

## 4. ุงูุตุงุฏุฑ ูุงููุงุฑุฏ
### 4.1 ุชุณุฌูู ุตุงุฏุฑ ุฌุฏูุฏ
### 4.2 ุชุณุฌูู ูุงุฑุฏ ุฌุฏูุฏ
### 4.3 ุงูุจุญุซ ูู ุงูุณุฌูุงุช

## 5. ุงูููุงู
### 5.1 ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ
### 5.2 ูุชุงุจุนุฉ ุงูููุงู
### 5.3 ุฅุถุงูุฉ ุชุนูููุงุช

## 6. ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
### 6.1 ุฅุฑุณุงู ูุณุชูุฏ ุนุจุฑ ุงูุจุฑูุฏ
### 6.2 ุฅูุดุงุก ุฑุงุจุท ูุดุชุฑู
### 6.3 ุฅุฏุงุฑุฉ ุงูุฑูุงุจุท ุงููุดุชุฑูุฉ

## 7. ุงูุฅุนุฏุงุฏุงุช (ูููุฏูุฑ)
### 7.1 ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
### 7.2 ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ
### 7.3 ุณุฌู ุงููุดุงุท
```

**ุจ) ุฏููู ุงููุทูุฑ (Developer Guide)**

```markdown
# ุฏููู ุงููุทูุฑ

## 1. ุงูุจููุฉ ุงูุชูููุฉ
- ASP.NET Core 8
- PostgreSQL 14
- Blazor Server
- Hangfire

## 2. ูุงุนุฏุฉ ุงูุจูุงูุงุช
### 2.1 ูุฎุทุท ุงูุฌุฏุงูู (ERD)
### 2.2 ุงูุนูุงูุงุช
### 2.3 Indexes

## 3. ูุงุฌูุงุช API
### 3.1 Documents API
- POST /api/documents/upload
- GET /api/documents/{id}
- PUT /api/documents/{id}
- DELETE /api/documents/{id}

### 3.2 Search API
- GET /api/search?q={query}

### 3.3 Tasks API
- POST /api/tasks
- GET /api/tasks/my
- PUT /api/tasks/{id}/status

## 4. ุฎุฏูุงุช ุงูุฎูููุฉ (Background Jobs)
### 4.1 OCR Processing
### 4.2 Lock Timeout
### 4.3 Task Reminders

## 5. ุงูุฃูุงู
### 5.1 Authentication
### 5.2 Authorization
### 5.3 ูููุงุช ุงููุฑูุฑ

## 6. ุงูุชูุณุนุงุช ุงููุณุชูุจููุฉ
- ุชุทุจูู ุฌูุงู
- ุชูุงูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ
- AI ูุชุตููู ุงููุณุชูุฏุงุช
```

**ุฌ) ุฏููู ุงูุชุซุจูุช (Deployment Guide)**

```markdown
# ุฏููู ุงูุชุซุจูุช ูุงููุดุฑ

## 1. ุงููุชุทูุจุงุช
- Windows Server 2019+ ุฃู Ubuntu 22.04+
- PostgreSQL 14+
- .NET 8 Runtime
- IIS (Windows) ุฃู Nginx (Linux)

## 2. ุฎุทูุงุช ุงูุชุซุจูุช

### 2.1 ุชุซุจูุช PostgreSQL
```


# Ubuntu

sudo apt update
sudo apt install postgresql-14

# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

sudo -u postgres createdb doc_management
sudo -u postgres createuser doc_user -P

```

### 2.2 ุชุซุจูุช .NET Runtime
```


# Ubuntu

wget https://dot.net/v1/dotnet-install.sh
bash dotnet-install.sh --channel 8.0

```

### 2.3 ูุดุฑ ุงูุชุทุจูู
```


# ุจูุงุก ุงูุชุทุจูู

dotnet publish -c Release -o /var/www/docapp

# ุฅุนุฏุงุฏุงุช appsettings.json

{
"ConnectionStrings": {
"DefaultConnection": "Host=localhost;Database=doc_management;Username=doc_user;Password=***"
}
}

```

### 2.4 ุฅุนุฏุงุฏ Nginx (Linux)
```

server {
listen 80;
server_name docapp.local;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
    }
    }

```

### 2.5 ุฅุนุฏุงุฏ Systemd Service
```

[Unit]
Description=Document Management System

[Service]
WorkingDirectory=/var/www/docapp
ExecStart=/usr/bin/dotnet /var/www/docapp/DocApp.dll
Restart=always

[Install]
WantedBy=multi-user.target

```

## 3. ุงููุณุฎ ุงูุงุญุชูุงุทู
```


# ูุณุฎ ุงุญุชูุงุทู ููุงุนุฏุฉ ุงูุจูุงูุงุช

pg_dump -U doc_user doc_management > backup_\$(date +%Y%m%d).sql

# ูุณุฎ ุงุญุชูุงุทู ูููููุงุช

rsync -av /mnt/nas/storage /backup/files/

```

## 4. ุงูุตูุงูุฉ
### 4.1 ุชุญุฏูุซ ุงูุชุทุจูู
### 4.2 ุชูุธูู ุงูุณุฌูุงุช
### 4.3 ูุฑุงูุจุฉ ุงูุฃุฏุงุก
```


### 5. ุชุฏุฑูุจ ุงูููุธููู

**ุงูููุงุฏ ุงููุทููุจุฉ:**

1. **ููุฏูู ุชุนูููู** (10-15 ุฏูููุฉ)
    - ููููุฉ ุฑูุน ุงููุณุชูุฏุงุช
    - ุงูุจุญุซ ูุงูุชุตูุญ
    - ุงุณุชุฎุฏุงู Version Control
    - ุฅุฏุงุฑุฉ ุงูููุงู
2. **ูุฑุดุฉ ุนูู** (2-3 ุณุงุนุงุช)
    - ุชุทุจูู ุนููู ุนูู ุงููุธุงู
    - ุฃุณุฆูุฉ ูุฃุฌูุจุฉ
3. **ูุฑูุฉ ูุฑุฌุนูุฉ ุณุฑูุนุฉ** (Quick Reference)
    - ุงูุฅุฌุฑุงุกุงุช ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู
    - ูุทุจูุนุฉ ุนูู ุตูุญุฉ ูุงุญุฏุฉ

## โ ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

| \# | ุงููุฎุฑุฌ | ุทุฑููุฉ ุงูุชุญูู |
| :-- | :-- | :-- |
| 1 | ุงูุณููุงุฑูู 1 ุงุฌุชุงุฒ ุงูุงุฎุชุจุงุฑ | ุฌููุน ุงูุฎุทูุงุช ูุฌุญุช |
| 2 | ุงูุณููุงุฑูู 2 ุงุฌุชุงุฒ ุงูุงุฎุชุจุงุฑ | ุฌููุน ุฅุตุฏุงุฑุงุช ุงูููู ููุฌูุฏุฉ |
| 3 | ุงูุณููุงุฑูู 3 ุงุฌุชุงุฒ ุงูุงุฎุชุจุงุฑ | OCR ูุนูู ูุงูุจุญุซ ูุฌุฏ ุงููุต |
| 4 | ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ุงุฌุชุงุฒ | ุฌููุน ุงููุนุงููุฑ ุชุญููุช |
| 5 | ุงุฎุชุจุงุฑ ุงูุฃูุงู ุงุฌุชุงุฒ | ูุง ุซุบุฑุงุช ูุงุถุญุฉ |
| 6 | ุฏููู ุงููุณุชุฎุฏู ูุงูู | ููู PDF ุจู20+ ุตูุญุฉ |
| 7 | ุฏููู ุงููุทูุฑ ูุงูู | ููู Markdown ุจู10+ ุตูุญุงุช |
| 8 | ุฏููู ุงูุชุซุจูุช ูุงูู | ุฎุทูุงุช ูุงุถุญุฉ ูุงุจูุฉ ููุชูููุฐ |

## ๐ ููุงุท ุงูุชุญูู ุงูููุงุฆูุฉ

```
โ ุฌููุน ุงูุณููุงุฑูููุงุช ุงูุซูุงุซุฉ ุงุฌุชุงุฒุช ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ
โ ุงุฎุชุจุงุฑ ุฑูุน 50 ููู < 5 ุซูุงูู
โ ุงุฎุชุจุงุฑ ุงูุจุญุซ ูู 1000 ูุณุชูุฏ < 2 ุซุงููุฉ
โ ุงุฎุชุจุงุฑ Dashboard < 1 ุซุงููุฉ ููุชุญููู
โ OCR ูููู 10 ุตูุญุงุช < 30 ุซุงููุฉ
โ ุฌููุน ุงุฎุชุจุงุฑุงุช ุงูุฃูุงู ุงุฌุชุงุฒุช
โ ุฏููู ุงููุณุชุฎุฏู ููุชูุจ ุจุงููุงูู (PDF)
โ ุฏููู ุงููุทูุฑ ููุชูุจ ุจุงููุงูู (Markdown)
โ ุฏููู ุงูุชุซุจูุช ููุชูุจ ูุน ุฃูุซูุฉ ุนูููุฉ
โ ูุฑูุฉ ูุฑุฌุนูุฉ ุณุฑูุนุฉ ุฌุงูุฒุฉ (1 ุตูุญุฉ)
โ ููุฏูู ุชุนูููู ูุณุฌู (10-15 ุฏูููุฉ)
โ ุชู ุชุฏุฑูุจ 3 ููุธููู ุนูู ุงูุฃูู
โ ุชู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฃูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููููุงุช
โ ุชู ุงุฎุชุจุงุฑ ุงุณุชุฑุฌุงุน ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
```

**๐ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูููุงุทุ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ!**

***

# ๐ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

## โ ูุง ุชู ุฅูุฌุงุฒู

ุจุนุฏ ุงูุชูุงู ุงููุฑุงุญู ุงูุชุณุนุฉ (0-8)ุ ุณูููู ูุฏูู:

1. โ **ูุธุงู ุฅุฏุงุฑุฉ ูุณุชูุฏุงุช ูุงูู** ูุนูู ุนูู ุดุจูุฉ ูุญููุฉ
2. โ **ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ** (12 ุฌุฏูู) ูุน ุนูุงูุงุช ูุงุถุญุฉ
3. โ **ูุธุงู Version Control** ูุชูุฏู ูุน Check-in/Check-out
4. โ **ุจุญุซ ููู** ูุน ุฏุนู OCR ูููุณุชูุฏุงุช ุงูููุณูุญุฉ
5. โ **ุฅุฏุงุฑุฉ ุงูุตุงุฏุฑ ูุงููุงุฑุฏ** ูุน ุชุฑููู ุชููุงุฆู
6. โ **ูุธุงู ููุงู** ุดุงูู ูุน ุฅุดุนุงุฑุงุช
7. โ **ุชูุงูู ุจุฑูุฏ ุฅููุชุฑููู** ููุดุงุฑูุฉ ุฑูุงุจุท ุขููุฉ
8. โ **ุณุฌู ูุดุงุท** ูุงูู (Audit Log) ููู ุฅุฌุฑุงุก
9. โ **ูุซุงุฆู ุดุงููุฉ** (ูุณุชุฎุฏูุ ูุทูุฑุ ุชุซุจูุช)

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ

| ุงููููู | ุงูุนุฏุฏ |
| :-- | :-- |
| **ุงูุฌุฏุงูู** | 12 ุฌุฏูู |
| **ุงูุตูุญุงุช** | ~25 ุตูุญุฉ |
| **API Endpoints** | ~40 endpoint |
| **Background Jobs** | 3 (OCR, Lock Timeout, Task Reminders) |
| **ุงูุฃุฏูุงุฑ** | 7 ุฃุฏูุงุฑ ูุฎุชููุฉ |
| **ุงููุฏุฉ ุงูุฅุฌูุงููุฉ** | 23-31 ููู ุนูู |

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

ุจุนุฏ ุงูุฅุทูุงูุ ูููู ุงูุชูููุฑ ูู:

1. **ุชุทุจูู ุฌูุงู** (iOS/Android)
2. **ุชูุงูู ูุน ูุงุชุณุงุจ** ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
3. **AI ูุชุตููู ุงููุณุชูุฏุงุช** ุชููุงุฆูุงู
4. **ุชุญูููุงุช ูุชูุฏูุฉ** (Dashboard ููุฅุญุตุงุฆูุงุช)
5. **ุชูููุน ุฅููุชุฑููู** ูููุณุชูุฏุงุช
6. **ูุธุงู ุฃุฑุดูุฉ** ูููููุงุช ุงููุฏููุฉ

## ๐ ุงูุฏุนู ูุงูุตูุงูุฉ

- **ูุณุฎ ุงุญุชูุงุทู ูููู** ุชููุงุฆู
- **ูุฑุงูุจุฉ ุงูุณุฌูุงุช** (Logs) ุฃุณุจูุนูุงู
- **ุชุญุฏูุซุงุช ุงูุฃูุงู** ุดูุฑูุงู
- **ุชุฏุฑูุจ ุฏูุฑู** ููููุธููู ุงูุฌุฏุฏ

***

**๐ ุชูุงูููุง! ููุฏ ุฃูููุช ุจูุงุก ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงููุงููููุฉ ุจูุฌุงุญ.**

***

**ุงููุณุฎุฉ**: 2.1 (ุงููุนุฏูุฉ ูุงููุญุณููุฉ)
**ุงูุชุงุฑูุฎ**: 21 ููููุจุฑ 2025
**ุฌููุน ุงูุญููู ูุญููุธุฉ**



